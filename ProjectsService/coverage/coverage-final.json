{"/home/alex/PhpstormProjects/astra-storage/ProjectsService/src/components/core/core.module.ts": {"path":"/home/alex/PhpstormProjects/astra-storage/ProjectsService/src/components/core/core.module.ts","statementMap":{"0":{"start":{"line":1,"column":17},"end":{"line":6,"column":1}},"1":{"start":{"line":2,"column":12},"end":{"line":2,"column":28}},"2":{"start":{"line":2,"column":34},"end":{"line":2,"column":125}},"3":{"start":{"line":3,"column":4},"end":{"line":4,"column":150}},"4":{"start":{"line":3,"column":79},"end":{"line":3,"column":131}},"5":{"start":{"line":4,"column":9},"end":{"line":4,"column":150}},"6":{"start":{"line":4,"column":58},"end":{"line":4,"column":150}},"7":{"start":{"line":4,"column":81},"end":{"line":4,"column":150}},"8":{"start":{"line":5,"column":4},"end":{"line":5,"column":66}},"9":{"start":{"line":9,"column":17},"end":{"line":10,"column":1}},"10":{"start":{"line":11,"column":0},"end":{"line":16,"column":15}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":1,"column":46},"end":{"line":1,"column":47}},"loc":{"start":{"line":1,"column":87},"end":{"line":6,"column":1}},"line":1}},"branchMap":{"0":{"loc":{"start":{"line":1,"column":17},"end":{"line":6,"column":1}},"type":"binary-expr","locations":[{"start":{"line":1,"column":18},"end":{"line":1,"column":22}},{"start":{"line":1,"column":26},"end":{"line":1,"column":41}},{"start":{"line":1,"column":46},"end":{"line":6,"column":1}}],"line":1},"1":{"loc":{"start":{"line":2,"column":34},"end":{"line":2,"column":125}},"type":"cond-expr","locations":[{"start":{"line":2,"column":42},"end":{"line":2,"column":48}},{"start":{"line":2,"column":51},"end":{"line":2,"column":125}}],"line":2},"2":{"loc":{"start":{"line":2,"column":51},"end":{"line":2,"column":125}},"type":"cond-expr","locations":[{"start":{"line":2,"column":67},"end":{"line":2,"column":118}},{"start":{"line":2,"column":121},"end":{"line":2,"column":125}}],"line":2},"3":{"loc":{"start":{"line":3,"column":4},"end":{"line":4,"column":150}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":4,"column":150}},{"start":{"line":3,"column":4},"end":{"line":4,"column":150}}],"line":3},"4":{"loc":{"start":{"line":3,"column":8},"end":{"line":3,"column":77}},"type":"binary-expr","locations":[{"start":{"line":3,"column":8},"end":{"line":3,"column":35}},{"start":{"line":3,"column":39},"end":{"line":3,"column":77}}],"line":3},"5":{"loc":{"start":{"line":4,"column":58},"end":{"line":4,"column":150}},"type":"if","locations":[{"start":{"line":4,"column":58},"end":{"line":4,"column":150}},{"start":{"line":4,"column":58},"end":{"line":4,"column":150}}],"line":4},"6":{"loc":{"start":{"line":4,"column":85},"end":{"line":4,"column":149}},"type":"binary-expr","locations":[{"start":{"line":4,"column":86},"end":{"line":4,"column":143}},{"start":{"line":4,"column":148},"end":{"line":4,"column":149}}],"line":4},"7":{"loc":{"start":{"line":4,"column":86},"end":{"line":4,"column":143}},"type":"cond-expr","locations":[{"start":{"line":4,"column":94},"end":{"line":4,"column":98}},{"start":{"line":4,"column":101},"end":{"line":4,"column":143}}],"line":4},"8":{"loc":{"start":{"line":4,"column":101},"end":{"line":4,"column":143}},"type":"cond-expr","locations":[{"start":{"line":4,"column":109},"end":{"line":4,"column":126}},{"start":{"line":4,"column":129},"end":{"line":4,"column":143}}],"line":4},"9":{"loc":{"start":{"line":5,"column":11},"end":{"line":5,"column":62}},"type":"binary-expr","locations":[{"start":{"line":5,"column":11},"end":{"line":5,"column":16}},{"start":{"line":5,"column":20},"end":{"line":5,"column":21}},{"start":{"line":5,"column":25},"end":{"line":5,"column":62}}],"line":5}},"s":{"0":3,"1":3,"2":3,"3":3,"4":3,"5":0,"6":0,"7":0,"8":3,"9":3,"10":3},"f":{"0":3},"b":{"0":[3,0,3],"1":[3,0],"2":[0,0],"3":[3,0],"4":[3,3],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[3,0,0]},"inputSourceMap":{"version":3,"file":"core.module.js","sourceRoot":"","sources":["core.module.ts"],"names":[],"mappings":";;;;;;AAAA,OAAO,EAAC,MAAM,EAAC,MAAM,gBAAgB,CAAC;AACtC,OAAO,EAAC,WAAW,EAAC,MAAM,wBAAwB,CAAC;AAMnD,IAAa,UAAU,GAAvB;CAA0B,CAAA;AAAb,UAAU;IAJtB,MAAM,CAAC;QACJ,SAAS,EAAE,CAAC,WAAW,CAAC;QACxB,OAAO,EAAE,CAAC,WAAW,CAAC;KACzB,CAAC;GACW,UAAU,CAAG;SAAb,UAAU","sourcesContent":["import {Module} from '@nestjs/common';\nimport {HashService} from '@bit/alan18081.astra-storage.common.dist/services';\n\n@Module({\n    providers: [HashService],\n    exports: [HashService],\n})\nexport class CoreModule {}"]},"_coverageSchema":"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c","hash":"ebdb4340947cf2c436d7947294e90db81f2cd999"}
,"/home/alex/PhpstormProjects/astra-storage/ProjectsService/src/components/project-accounts/project-account.entity.ts": {"path":"/home/alex/PhpstormProjects/astra-storage/ProjectsService/src/components/project-accounts/project-account.entity.ts","statementMap":{"0":{"start":{"line":1,"column":17},"end":{"line":6,"column":1}},"1":{"start":{"line":2,"column":12},"end":{"line":2,"column":28}},"2":{"start":{"line":2,"column":34},"end":{"line":2,"column":125}},"3":{"start":{"line":3,"column":4},"end":{"line":4,"column":150}},"4":{"start":{"line":3,"column":79},"end":{"line":3,"column":131}},"5":{"start":{"line":4,"column":9},"end":{"line":4,"column":150}},"6":{"start":{"line":4,"column":58},"end":{"line":4,"column":150}},"7":{"start":{"line":4,"column":81},"end":{"line":4,"column":150}},"8":{"start":{"line":5,"column":4},"end":{"line":5,"column":66}},"9":{"start":{"line":7,"column":17},"end":{"line":9,"column":1}},"10":{"start":{"line":8,"column":4},"end":{"line":8,"column":109}},"11":{"start":{"line":8,"column":79},"end":{"line":8,"column":109}},"12":{"start":{"line":14,"column":21},"end":{"line":19,"column":1}},"13":{"start":{"line":16,"column":8},"end":{"line":16,"column":16}},"14":{"start":{"line":17,"column":8},"end":{"line":17,"column":37}},"15":{"start":{"line":20,"column":0},"end":{"line":23,"column":43}},"16":{"start":{"line":24,"column":0},"end":{"line":27,"column":46}},"17":{"start":{"line":28,"column":0},"end":{"line":33,"column":46}},"18":{"start":{"line":34,"column":0},"end":{"line":38,"column":49}},"19":{"start":{"line":39,"column":0},"end":{"line":43,"column":50}},"20":{"start":{"line":44,"column":0},"end":{"line":48,"column":48}},"21":{"start":{"line":49,"column":0},"end":{"line":53,"column":50}},"22":{"start":{"line":54,"column":0},"end":{"line":57,"column":19}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":1,"column":46},"end":{"line":1,"column":47}},"loc":{"start":{"line":1,"column":87},"end":{"line":6,"column":1}},"line":1},"1":{"name":"(anonymous_1)","decl":{"start":{"line":7,"column":46},"end":{"line":7,"column":47}},"loc":{"start":{"line":7,"column":62},"end":{"line":9,"column":1}},"line":7},"2":{"name":"(anonymous_2)","decl":{"start":{"line":15,"column":4},"end":{"line":15,"column":5}},"loc":{"start":{"line":15,"column":25},"end":{"line":18,"column":5}},"line":15}},"branchMap":{"0":{"loc":{"start":{"line":1,"column":17},"end":{"line":6,"column":1}},"type":"binary-expr","locations":[{"start":{"line":1,"column":18},"end":{"line":1,"column":22}},{"start":{"line":1,"column":26},"end":{"line":1,"column":41}},{"start":{"line":1,"column":46},"end":{"line":6,"column":1}}],"line":1},"1":{"loc":{"start":{"line":2,"column":34},"end":{"line":2,"column":125}},"type":"cond-expr","locations":[{"start":{"line":2,"column":42},"end":{"line":2,"column":48}},{"start":{"line":2,"column":51},"end":{"line":2,"column":125}}],"line":2},"2":{"loc":{"start":{"line":2,"column":51},"end":{"line":2,"column":125}},"type":"cond-expr","locations":[{"start":{"line":2,"column":67},"end":{"line":2,"column":118}},{"start":{"line":2,"column":121},"end":{"line":2,"column":125}}],"line":2},"3":{"loc":{"start":{"line":3,"column":4},"end":{"line":4,"column":150}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":4,"column":150}},{"start":{"line":3,"column":4},"end":{"line":4,"column":150}}],"line":3},"4":{"loc":{"start":{"line":3,"column":8},"end":{"line":3,"column":77}},"type":"binary-expr","locations":[{"start":{"line":3,"column":8},"end":{"line":3,"column":35}},{"start":{"line":3,"column":39},"end":{"line":3,"column":77}}],"line":3},"5":{"loc":{"start":{"line":4,"column":58},"end":{"line":4,"column":150}},"type":"if","locations":[{"start":{"line":4,"column":58},"end":{"line":4,"column":150}},{"start":{"line":4,"column":58},"end":{"line":4,"column":150}}],"line":4},"6":{"loc":{"start":{"line":4,"column":85},"end":{"line":4,"column":149}},"type":"binary-expr","locations":[{"start":{"line":4,"column":86},"end":{"line":4,"column":143}},{"start":{"line":4,"column":148},"end":{"line":4,"column":149}}],"line":4},"7":{"loc":{"start":{"line":4,"column":86},"end":{"line":4,"column":143}},"type":"cond-expr","locations":[{"start":{"line":4,"column":94},"end":{"line":4,"column":98}},{"start":{"line":4,"column":101},"end":{"line":4,"column":143}}],"line":4},"8":{"loc":{"start":{"line":4,"column":101},"end":{"line":4,"column":143}},"type":"cond-expr","locations":[{"start":{"line":4,"column":109},"end":{"line":4,"column":126}},{"start":{"line":4,"column":129},"end":{"line":4,"column":143}}],"line":4},"9":{"loc":{"start":{"line":5,"column":11},"end":{"line":5,"column":62}},"type":"binary-expr","locations":[{"start":{"line":5,"column":11},"end":{"line":5,"column":16}},{"start":{"line":5,"column":20},"end":{"line":5,"column":21}},{"start":{"line":5,"column":25},"end":{"line":5,"column":62}}],"line":5},"10":{"loc":{"start":{"line":7,"column":17},"end":{"line":9,"column":1}},"type":"binary-expr","locations":[{"start":{"line":7,"column":18},"end":{"line":7,"column":22}},{"start":{"line":7,"column":26},"end":{"line":7,"column":41}},{"start":{"line":7,"column":46},"end":{"line":9,"column":1}}],"line":7},"11":{"loc":{"start":{"line":8,"column":4},"end":{"line":8,"column":109}},"type":"if","locations":[{"start":{"line":8,"column":4},"end":{"line":8,"column":109}},{"start":{"line":8,"column":4},"end":{"line":8,"column":109}}],"line":8},"12":{"loc":{"start":{"line":8,"column":8},"end":{"line":8,"column":77}},"type":"binary-expr","locations":[{"start":{"line":8,"column":8},"end":{"line":8,"column":35}},{"start":{"line":8,"column":39},"end":{"line":8,"column":77}}],"line":8},"13":{"loc":{"start":{"line":52,"column":30},"end":{"line":52,"column":110}},"type":"binary-expr","locations":[{"start":{"line":52,"column":30},"end":{"line":52,"column":94}},{"start":{"line":52,"column":98},"end":{"line":52,"column":100}},{"start":{"line":52,"column":104},"end":{"line":52,"column":110}}],"line":52},"14":{"loc":{"start":{"line":52,"column":43},"end":{"line":52,"column":78}},"type":"binary-expr","locations":[{"start":{"line":52,"column":43},"end":{"line":52,"column":70}},{"start":{"line":52,"column":74},"end":{"line":52,"column":78}}],"line":52},"15":{"loc":{"start":{"line":56,"column":37},"end":{"line":56,"column":123}},"type":"binary-expr","locations":[{"start":{"line":56,"column":37},"end":{"line":56,"column":107}},{"start":{"line":56,"column":111},"end":{"line":56,"column":113}},{"start":{"line":56,"column":117},"end":{"line":56,"column":123}}],"line":56},"16":{"loc":{"start":{"line":56,"column":50},"end":{"line":56,"column":91}},"type":"binary-expr","locations":[{"start":{"line":56,"column":50},"end":{"line":56,"column":80}},{"start":{"line":56,"column":84},"end":{"line":56,"column":91}}],"line":56}},"s":{"0":2,"1":16,"2":16,"3":16,"4":16,"5":0,"6":0,"7":0,"8":16,"9":2,"10":16,"11":16,"12":2,"13":6,"14":6,"15":2,"16":2,"17":2,"18":2,"19":2,"20":2,"21":2,"22":2},"f":{"0":16,"1":16,"2":6},"b":{"0":[2,0,2],"1":[2,14],"2":[0,14],"3":[16,0],"4":[16,16],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[16,14,0],"10":[2,0,2],"11":[16,0],"12":[16,16],"13":[2,2,0],"14":[2,2],"15":[2,0,2],"16":[2,0]},"inputSourceMap":{"version":3,"file":"project-account.entity.js","sourceRoot":"","sources":["project-account.entity.ts"],"names":[],"mappings":";;;;;;;;;;AAAA,OAAO,EAAE,UAAU,EAAmB,MAAM,eAAe,CAAC;AAC5D,OAAO,EAAC,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE,aAAa,EAAE,sBAAsB,EAAE,MAAM,EAAC,MAAM,SAAS,CAAC;AAC7F,OAAO,EAAC,OAAO,EAAC,MAAM,mBAAmB,CAAC;AAG1C,IAAa,cAAc,GAA3B,oBAA4B,SAAQ,UAAU;IA4B1C,YAAY,OAAgC;QACxC,KAAK,EAAE,CAAC;QACR,MAAM,CAAC,MAAM,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;IACjC,CAAC;CAEJ,CAAA;AA/BG;IADC,sBAAsB,EAAE;;0CACd;AAGX;IADC,MAAM,CAAC,SAAS,CAAC;;6CACJ;AAKd;IAHC,MAAM,EAAE;IACR,KAAK,EAAE;IACP,MAAM,CAAC,OAAO,CAAC;;6CACF;AAId;IAFC,MAAM,EAAE;IACR,OAAO,EAAE;;gDACO;AAIjB;IAFC,aAAa,CAAC,SAAS,CAAC;IACxB,OAAO,EAAE;;iDACQ;AAIlB;IAFC,aAAa,CAAC,SAAS,CAAC;IACxB,OAAO,EAAE;;+CACM;AAIhB;IAFC,MAAM,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;IAC1B,OAAO,EAAE;kDACC,IAAI,oBAAJ,IAAI;iDAAC;AA1BP,cAAc;IAD1B,MAAM,EAAE;yDA6BgB,OAAO,oBAAP,OAAO;GA5BnB,cAAc,CAiC1B;SAjCY,cAAc","sourcesContent":["import { BaseEntity, IProjectAccount } from '@bit/alan18081.astra-storage.common.dist';\nimport {Column, Entity, Index, PrimaryColumn, PrimaryGeneratedColumn, Unique} from 'typeorm';\nimport {Exclude} from 'class-transformer';\n\n@Entity()\nexport class ProjectAccount extends BaseEntity implements IProjectAccount {\n    @PrimaryGeneratedColumn()\n    id: number;\n\n    @Column('varchar')\n    login: string;\n\n    @Column()\n    @Index()\n    @Unique('email')\n    email: string;\n\n    @Column()\n    @Exclude()\n    password: string;\n\n    @PrimaryColumn('integer')\n    @Exclude()\n    projectId: number;\n\n    @PrimaryColumn('integer')\n    @Exclude()\n    ownerId: number;\n\n    @Column({ nullable: true })\n    @Exclude()\n    deletedAt: Date;\n\n    constructor(partial: Partial<ProjectAccount>) {\n        super();\n        Object.assign(this, partial);\n    }\n\n}"]},"_coverageSchema":"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c","hash":"7ea7020e0d3f3549b5ec6ef849e037da16629bf7"}
,"/home/alex/PhpstormProjects/astra-storage/ProjectsService/src/components/project-accounts/project-accounts.repository.ts": {"path":"/home/alex/PhpstormProjects/astra-storage/ProjectsService/src/components/project-accounts/project-accounts.repository.ts","statementMap":{"0":{"start":{"line":1,"column":17},"end":{"line":6,"column":1}},"1":{"start":{"line":2,"column":12},"end":{"line":2,"column":28}},"2":{"start":{"line":2,"column":34},"end":{"line":2,"column":125}},"3":{"start":{"line":3,"column":4},"end":{"line":4,"column":150}},"4":{"start":{"line":3,"column":79},"end":{"line":3,"column":131}},"5":{"start":{"line":4,"column":9},"end":{"line":4,"column":150}},"6":{"start":{"line":4,"column":58},"end":{"line":4,"column":150}},"7":{"start":{"line":4,"column":81},"end":{"line":4,"column":150}},"8":{"start":{"line":5,"column":4},"end":{"line":5,"column":66}},"9":{"start":{"line":7,"column":16},"end":{"line":14,"column":1}},"10":{"start":{"line":8,"column":4},"end":{"line":13,"column":7}},"11":{"start":{"line":9,"column":36},"end":{"line":9,"column":97}},"12":{"start":{"line":9,"column":42},"end":{"line":9,"column":70}},"13":{"start":{"line":9,"column":85},"end":{"line":9,"column":95}},"14":{"start":{"line":10,"column":35},"end":{"line":10,"column":100}},"15":{"start":{"line":10,"column":41},"end":{"line":10,"column":73}},"16":{"start":{"line":10,"column":88},"end":{"line":10,"column":98}},"17":{"start":{"line":11,"column":32},"end":{"line":11,"column":149}},"18":{"start":{"line":11,"column":97},"end":{"line":11,"column":119}},"19":{"start":{"line":12,"column":8},"end":{"line":12,"column":78}},"20":{"start":{"line":18,"column":32},"end":{"line":45,"column":1}},"21":{"start":{"line":20,"column":8},"end":{"line":22,"column":11}},"22":{"start":{"line":21,"column":12},"end":{"line":21,"column":76}},"23":{"start":{"line":25,"column":8},"end":{"line":27,"column":11}},"24":{"start":{"line":26,"column":12},"end":{"line":26,"column":57}},"25":{"start":{"line":30,"column":23},"end":{"line":30,"column":42}},"26":{"start":{"line":30,"column":31},"end":{"line":30,"column":42}},"27":{"start":{"line":31,"column":8},"end":{"line":33,"column":11}},"28":{"start":{"line":32,"column":12},"end":{"line":32,"column":122}},"29":{"start":{"line":36,"column":8},"end":{"line":38,"column":11}},"30":{"start":{"line":37,"column":12},"end":{"line":37,"column":71}},"31":{"start":{"line":41,"column":8},"end":{"line":43,"column":11}},"32":{"start":{"line":42,"column":12},"end":{"line":42,"column":65}},"33":{"start":{"line":46,"column":0},"end":{"line":48,"column":30}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":1,"column":46},"end":{"line":1,"column":47}},"loc":{"start":{"line":1,"column":87},"end":{"line":6,"column":1}},"line":1},"1":{"name":"(anonymous_1)","decl":{"start":{"line":7,"column":44},"end":{"line":7,"column":45}},"loc":{"start":{"line":7,"column":89},"end":{"line":14,"column":1}},"line":7},"2":{"name":"(anonymous_2)","decl":{"start":{"line":8,"column":36},"end":{"line":8,"column":37}},"loc":{"start":{"line":8,"column":63},"end":{"line":13,"column":5}},"line":8},"3":{"name":"fulfilled","decl":{"start":{"line":9,"column":17},"end":{"line":9,"column":26}},"loc":{"start":{"line":9,"column":34},"end":{"line":9,"column":99}},"line":9},"4":{"name":"rejected","decl":{"start":{"line":10,"column":17},"end":{"line":10,"column":25}},"loc":{"start":{"line":10,"column":33},"end":{"line":10,"column":102}},"line":10},"5":{"name":"step","decl":{"start":{"line":11,"column":17},"end":{"line":11,"column":21}},"loc":{"start":{"line":11,"column":30},"end":{"line":11,"column":151}},"line":11},"6":{"name":"(anonymous_6)","decl":{"start":{"line":11,"column":76},"end":{"line":11,"column":77}},"loc":{"start":{"line":11,"column":95},"end":{"line":11,"column":121}},"line":11},"7":{"name":"(anonymous_7)","decl":{"start":{"line":19,"column":4},"end":{"line":19,"column":5}},"loc":{"start":{"line":19,"column":20},"end":{"line":23,"column":5}},"line":19},"8":{"name":"(anonymous_8)","decl":{"start":{"line":20,"column":47},"end":{"line":20,"column":48}},"loc":{"start":{"line":20,"column":60},"end":{"line":22,"column":9}},"line":20},"9":{"name":"(anonymous_9)","decl":{"start":{"line":24,"column":4},"end":{"line":24,"column":5}},"loc":{"start":{"line":24,"column":17},"end":{"line":28,"column":5}},"line":24},"10":{"name":"(anonymous_10)","decl":{"start":{"line":25,"column":47},"end":{"line":25,"column":48}},"loc":{"start":{"line":25,"column":60},"end":{"line":27,"column":9}},"line":25},"11":{"name":"(anonymous_11)","decl":{"start":{"line":29,"column":4},"end":{"line":29,"column":5}},"loc":{"start":{"line":29,"column":46},"end":{"line":34,"column":5}},"line":29},"12":{"name":"(anonymous_12)","decl":{"start":{"line":30,"column":23},"end":{"line":30,"column":24}},"loc":{"start":{"line":30,"column":31},"end":{"line":30,"column":42}},"line":30},"13":{"name":"(anonymous_13)","decl":{"start":{"line":31,"column":47},"end":{"line":31,"column":48}},"loc":{"start":{"line":31,"column":60},"end":{"line":33,"column":9}},"line":31},"14":{"name":"(anonymous_14)","decl":{"start":{"line":35,"column":4},"end":{"line":35,"column":5}},"loc":{"start":{"line":35,"column":37},"end":{"line":39,"column":5}},"line":35},"15":{"name":"(anonymous_15)","decl":{"start":{"line":36,"column":47},"end":{"line":36,"column":48}},"loc":{"start":{"line":36,"column":60},"end":{"line":38,"column":9}},"line":36},"16":{"name":"(anonymous_16)","decl":{"start":{"line":40,"column":4},"end":{"line":40,"column":5}},"loc":{"start":{"line":40,"column":19},"end":{"line":44,"column":5}},"line":40},"17":{"name":"(anonymous_17)","decl":{"start":{"line":41,"column":47},"end":{"line":41,"column":48}},"loc":{"start":{"line":41,"column":60},"end":{"line":43,"column":9}},"line":41}},"branchMap":{"0":{"loc":{"start":{"line":1,"column":17},"end":{"line":6,"column":1}},"type":"binary-expr","locations":[{"start":{"line":1,"column":18},"end":{"line":1,"column":22}},{"start":{"line":1,"column":26},"end":{"line":1,"column":41}},{"start":{"line":1,"column":46},"end":{"line":6,"column":1}}],"line":1},"1":{"loc":{"start":{"line":2,"column":34},"end":{"line":2,"column":125}},"type":"cond-expr","locations":[{"start":{"line":2,"column":42},"end":{"line":2,"column":48}},{"start":{"line":2,"column":51},"end":{"line":2,"column":125}}],"line":2},"2":{"loc":{"start":{"line":2,"column":51},"end":{"line":2,"column":125}},"type":"cond-expr","locations":[{"start":{"line":2,"column":67},"end":{"line":2,"column":118}},{"start":{"line":2,"column":121},"end":{"line":2,"column":125}}],"line":2},"3":{"loc":{"start":{"line":3,"column":4},"end":{"line":4,"column":150}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":4,"column":150}},{"start":{"line":3,"column":4},"end":{"line":4,"column":150}}],"line":3},"4":{"loc":{"start":{"line":3,"column":8},"end":{"line":3,"column":77}},"type":"binary-expr","locations":[{"start":{"line":3,"column":8},"end":{"line":3,"column":35}},{"start":{"line":3,"column":39},"end":{"line":3,"column":77}}],"line":3},"5":{"loc":{"start":{"line":4,"column":58},"end":{"line":4,"column":150}},"type":"if","locations":[{"start":{"line":4,"column":58},"end":{"line":4,"column":150}},{"start":{"line":4,"column":58},"end":{"line":4,"column":150}}],"line":4},"6":{"loc":{"start":{"line":4,"column":85},"end":{"line":4,"column":149}},"type":"binary-expr","locations":[{"start":{"line":4,"column":86},"end":{"line":4,"column":143}},{"start":{"line":4,"column":148},"end":{"line":4,"column":149}}],"line":4},"7":{"loc":{"start":{"line":4,"column":86},"end":{"line":4,"column":143}},"type":"cond-expr","locations":[{"start":{"line":4,"column":94},"end":{"line":4,"column":98}},{"start":{"line":4,"column":101},"end":{"line":4,"column":143}}],"line":4},"8":{"loc":{"start":{"line":4,"column":101},"end":{"line":4,"column":143}},"type":"cond-expr","locations":[{"start":{"line":4,"column":109},"end":{"line":4,"column":126}},{"start":{"line":4,"column":129},"end":{"line":4,"column":143}}],"line":4},"9":{"loc":{"start":{"line":5,"column":11},"end":{"line":5,"column":62}},"type":"binary-expr","locations":[{"start":{"line":5,"column":11},"end":{"line":5,"column":16}},{"start":{"line":5,"column":20},"end":{"line":5,"column":21}},{"start":{"line":5,"column":25},"end":{"line":5,"column":62}}],"line":5},"10":{"loc":{"start":{"line":7,"column":16},"end":{"line":14,"column":1}},"type":"binary-expr","locations":[{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},{"start":{"line":7,"column":25},"end":{"line":7,"column":39}},{"start":{"line":7,"column":44},"end":{"line":14,"column":1}}],"line":7},"11":{"loc":{"start":{"line":8,"column":16},"end":{"line":8,"column":34}},"type":"binary-expr","locations":[{"start":{"line":8,"column":16},"end":{"line":8,"column":17}},{"start":{"line":8,"column":22},"end":{"line":8,"column":33}}],"line":8},"12":{"loc":{"start":{"line":11,"column":32},"end":{"line":11,"column":148}},"type":"cond-expr","locations":[{"start":{"line":11,"column":46},"end":{"line":11,"column":67}},{"start":{"line":11,"column":70},"end":{"line":11,"column":148}}],"line":11},"13":{"loc":{"start":{"line":12,"column":51},"end":{"line":12,"column":67}},"type":"binary-expr","locations":[{"start":{"line":12,"column":51},"end":{"line":12,"column":61}},{"start":{"line":12,"column":65},"end":{"line":12,"column":67}}],"line":12}},"s":{"0":2,"1":2,"2":2,"3":2,"4":2,"5":0,"6":0,"7":0,"8":2,"9":2,"10":5,"11":1,"12":1,"13":0,"14":0,"15":0,"16":0,"17":6,"18":1,"19":5,"20":2,"21":2,"22":2,"23":2,"24":2,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":1,"32":1,"33":2},"f":{"0":2,"1":5,"2":5,"3":1,"4":0,"5":6,"6":1,"7":2,"8":2,"9":2,"10":2,"11":0,"12":0,"13":0,"14":0,"15":0,"16":1,"17":1},"b":{"0":[2,0,2],"1":[2,0],"2":[0,0],"3":[2,0],"4":[2,2],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[2,0,0],"10":[2,0,2],"11":[5,5],"12":[5,1],"13":[5,5]},"inputSourceMap":{"version":3,"file":"project-accounts.repository.js","sourceRoot":"","sources":["project-accounts.repository.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA,OAAO,EAAE,gBAAgB,EAAmB,MAAM,SAAS,CAAC;AAC5D,OAAO,EAAE,cAAc,EAAE,MAAM,0BAA0B,CAAC;AAC1D,OAAO,EAAE,cAAc,EAAqB,MAAM,eAAe,CAAC;AAIlE,IAAa,yBAAyB,GAAtC,+BAAuC,SAAQ,cAA8B;IAErE,QAAQ,CAAC,KAA8B;;YAC3C,OAAO,IAAI,CAAC,IAAI,mBAAM,KAAK,IAAE,SAAS,EAAE,IAAI,IAAG,CAAC;QAClD,CAAC;KAAA;IAEK,QAAQ,CAAC,EAAU;;YACvB,OAAO,IAAI,CAAC,OAAO,CAAC,EAAE,EAAE,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC,CAAC;QAC/C,CAAC;KAAA;IAEK,sBAAsB,CAAC,KAAsC,EAAE,UAAmC;;;YACtG,OAAO,gCAA4B,8BAAM,KAAK,IAAE,SAAS,EAAE,IAAI,KAAI,UAAU,EAAE;QACjF,CAAC;KAAA;IAEK,cAAc,CAAC,KAAa,EAAE,SAAiB;;YACnD,OAAO,IAAI,CAAC,OAAO,CAAC,EAAE,KAAK,EAAE,SAAS,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC,CAAC;QAC7D,CAAC;KAAA;IAEK,UAAU,CAAC,EAAU;;YACzB,MAAM,IAAI,CAAC,MAAM,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,SAAS,EAAE,IAAI,IAAI,EAAE,EAAE,CAAC,CAAC;QACvD,CAAC;KAAA;CACF,CAAA;AArBY,yBAAyB;IADrC,gBAAgB,CAAC,cAAc,CAAC;GACpB,yBAAyB,CAqBrC;SArBY,yBAAyB","sourcesContent":["import { EntityRepository, FindManyOptions } from 'typeorm';\nimport { ProjectAccount } from './project-account.entity';\nimport { BaseRepository, PaginatedResponse } from '@bit/alan18081.astra-storage.common.dist';\nimport { PaginationDto } from '@bit/alan18081.astra-storage.common.dist/dto';\n\n@EntityRepository(ProjectAccount)\nexport class ProjectAccountsRepository extends BaseRepository<ProjectAccount> {\n\n  async findMany(query: Partial<ProjectAccount>): Promise<ProjectAccount[]> {\n    return this.find({ ...query, deletedAt: null });\n  }\n\n  async findById(id: number): Promise<ProjectAccount | undefined> {\n    return this.findOne({ id, deletedAt: null });\n  }\n\n  async findManyWithPagination(query: FindManyOptions<ProjectAccount>, pagination: Required<PaginationDto>): Promise<PaginatedResponse<ProjectAccount>> {\n    return super.findManyWithPagination({ ...query, deletedAt: null }, pagination);\n  }\n\n  async findOneByEmail(email: string, projectId: number): Promise<ProjectAccount | undefined> {\n    return this.findOne({ email, projectId, deletedAt: null });\n  }\n\n  async removeById(id: number): Promise<void> {\n    await this.update({ id }, { deletedAt: new Date() });\n  }\n}"]},"_coverageSchema":"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c","hash":"11b6f2789cba8dd667372bcf89b29f4b278254e8"}
,"/home/alex/PhpstormProjects/astra-storage/ProjectsService/src/components/project-accounts/project-accounts.service.ts": {"path":"/home/alex/PhpstormProjects/astra-storage/ProjectsService/src/components/project-accounts/project-accounts.service.ts","statementMap":{"0":{"start":{"line":1,"column":17},"end":{"line":6,"column":1}},"1":{"start":{"line":2,"column":12},"end":{"line":2,"column":28}},"2":{"start":{"line":2,"column":34},"end":{"line":2,"column":125}},"3":{"start":{"line":3,"column":4},"end":{"line":4,"column":150}},"4":{"start":{"line":3,"column":79},"end":{"line":3,"column":131}},"5":{"start":{"line":4,"column":9},"end":{"line":4,"column":150}},"6":{"start":{"line":4,"column":58},"end":{"line":4,"column":150}},"7":{"start":{"line":4,"column":81},"end":{"line":4,"column":150}},"8":{"start":{"line":5,"column":4},"end":{"line":5,"column":66}},"9":{"start":{"line":7,"column":17},"end":{"line":9,"column":1}},"10":{"start":{"line":8,"column":4},"end":{"line":8,"column":109}},"11":{"start":{"line":8,"column":79},"end":{"line":8,"column":109}},"12":{"start":{"line":10,"column":14},"end":{"line":12,"column":1}},"13":{"start":{"line":11,"column":4},"end":{"line":11,"column":73}},"14":{"start":{"line":11,"column":36},"end":{"line":11,"column":71}},"15":{"start":{"line":13,"column":16},"end":{"line":20,"column":1}},"16":{"start":{"line":14,"column":4},"end":{"line":19,"column":7}},"17":{"start":{"line":15,"column":36},"end":{"line":15,"column":97}},"18":{"start":{"line":15,"column":42},"end":{"line":15,"column":70}},"19":{"start":{"line":15,"column":85},"end":{"line":15,"column":95}},"20":{"start":{"line":16,"column":35},"end":{"line":16,"column":100}},"21":{"start":{"line":16,"column":41},"end":{"line":16,"column":73}},"22":{"start":{"line":16,"column":88},"end":{"line":16,"column":98}},"23":{"start":{"line":17,"column":32},"end":{"line":17,"column":149}},"24":{"start":{"line":17,"column":97},"end":{"line":17,"column":119}},"25":{"start":{"line":18,"column":8},"end":{"line":18,"column":78}},"26":{"start":{"line":30,"column":29},"end":{"line":74,"column":1}},"27":{"start":{"line":32,"column":8},"end":{"line":32,"column":67}},"28":{"start":{"line":33,"column":8},"end":{"line":33,"column":39}},"29":{"start":{"line":34,"column":8},"end":{"line":34,"column":47}},"30":{"start":{"line":37,"column":8},"end":{"line":46,"column":11}},"31":{"start":{"line":38,"column":28},"end":{"line":38,"column":89}},"32":{"start":{"line":39,"column":12},"end":{"line":41,"column":13}},"33":{"start":{"line":40,"column":16},"end":{"line":40,"column":69}},"34":{"start":{"line":42,"column":12},"end":{"line":44,"column":13}},"35":{"start":{"line":43,"column":16},"end":{"line":43,"column":115}},"36":{"start":{"line":45,"column":12},"end":{"line":45,"column":80}},"37":{"start":{"line":49,"column":8},"end":{"line":51,"column":11}},"38":{"start":{"line":50,"column":12},"end":{"line":50,"column":63}},"39":{"start":{"line":54,"column":8},"end":{"line":56,"column":11}},"40":{"start":{"line":55,"column":12},"end":{"line":55,"column":83}},"41":{"start":{"line":59,"column":8},"end":{"line":67,"column":11}},"42":{"start":{"line":60,"column":35},"end":{"line":60,"column":120}},"43":{"start":{"line":61,"column":12},"end":{"line":63,"column":13}},"44":{"start":{"line":62,"column":16},"end":{"line":62,"column":69}},"45":{"start":{"line":64,"column":31},"end":{"line":64,"column":58}},"46":{"start":{"line":65,"column":12},"end":{"line":65,"column":88}},"47":{"start":{"line":66,"column":12},"end":{"line":66,"column":73}},"48":{"start":{"line":70,"column":8},"end":{"line":72,"column":11}},"49":{"start":{"line":71,"column":12},"end":{"line":71,"column":64}},"50":{"start":{"line":75,"column":0},"end":{"line":79,"column":27}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":1,"column":46},"end":{"line":1,"column":47}},"loc":{"start":{"line":1,"column":87},"end":{"line":6,"column":1}},"line":1},"1":{"name":"(anonymous_1)","decl":{"start":{"line":7,"column":46},"end":{"line":7,"column":47}},"loc":{"start":{"line":7,"column":62},"end":{"line":9,"column":1}},"line":7},"2":{"name":"(anonymous_2)","decl":{"start":{"line":10,"column":40},"end":{"line":10,"column":41}},"loc":{"start":{"line":10,"column":73},"end":{"line":12,"column":1}},"line":10},"3":{"name":"(anonymous_3)","decl":{"start":{"line":11,"column":11},"end":{"line":11,"column":12}},"loc":{"start":{"line":11,"column":34},"end":{"line":11,"column":73}},"line":11},"4":{"name":"(anonymous_4)","decl":{"start":{"line":13,"column":44},"end":{"line":13,"column":45}},"loc":{"start":{"line":13,"column":89},"end":{"line":20,"column":1}},"line":13},"5":{"name":"(anonymous_5)","decl":{"start":{"line":14,"column":36},"end":{"line":14,"column":37}},"loc":{"start":{"line":14,"column":63},"end":{"line":19,"column":5}},"line":14},"6":{"name":"fulfilled","decl":{"start":{"line":15,"column":17},"end":{"line":15,"column":26}},"loc":{"start":{"line":15,"column":34},"end":{"line":15,"column":99}},"line":15},"7":{"name":"rejected","decl":{"start":{"line":16,"column":17},"end":{"line":16,"column":25}},"loc":{"start":{"line":16,"column":33},"end":{"line":16,"column":102}},"line":16},"8":{"name":"step","decl":{"start":{"line":17,"column":17},"end":{"line":17,"column":21}},"loc":{"start":{"line":17,"column":30},"end":{"line":17,"column":151}},"line":17},"9":{"name":"(anonymous_9)","decl":{"start":{"line":17,"column":76},"end":{"line":17,"column":77}},"loc":{"start":{"line":17,"column":95},"end":{"line":17,"column":121}},"line":17},"10":{"name":"(anonymous_10)","decl":{"start":{"line":31,"column":4},"end":{"line":31,"column":5}},"loc":{"start":{"line":31,"column":73},"end":{"line":35,"column":5}},"line":31},"11":{"name":"(anonymous_11)","decl":{"start":{"line":36,"column":4},"end":{"line":36,"column":5}},"loc":{"start":{"line":36,"column":49},"end":{"line":47,"column":5}},"line":36},"12":{"name":"(anonymous_12)","decl":{"start":{"line":37,"column":47},"end":{"line":37,"column":48}},"loc":{"start":{"line":37,"column":60},"end":{"line":46,"column":9}},"line":37},"13":{"name":"(anonymous_13)","decl":{"start":{"line":48,"column":4},"end":{"line":48,"column":5}},"loc":{"start":{"line":48,"column":17},"end":{"line":52,"column":5}},"line":48},"14":{"name":"(anonymous_14)","decl":{"start":{"line":49,"column":47},"end":{"line":49,"column":48}},"loc":{"start":{"line":49,"column":60},"end":{"line":51,"column":9}},"line":49},"15":{"name":"(anonymous_15)","decl":{"start":{"line":53,"column":4},"end":{"line":53,"column":5}},"loc":{"start":{"line":53,"column":41},"end":{"line":57,"column":5}},"line":53},"16":{"name":"(anonymous_16)","decl":{"start":{"line":54,"column":47},"end":{"line":54,"column":48}},"loc":{"start":{"line":54,"column":60},"end":{"line":56,"column":9}},"line":54},"17":{"name":"(anonymous_17)","decl":{"start":{"line":58,"column":4},"end":{"line":58,"column":5}},"loc":{"start":{"line":58,"column":23},"end":{"line":68,"column":5}},"line":58},"18":{"name":"(anonymous_18)","decl":{"start":{"line":59,"column":47},"end":{"line":59,"column":48}},"loc":{"start":{"line":59,"column":60},"end":{"line":67,"column":9}},"line":59},"19":{"name":"(anonymous_19)","decl":{"start":{"line":69,"column":4},"end":{"line":69,"column":5}},"loc":{"start":{"line":69,"column":19},"end":{"line":73,"column":5}},"line":69},"20":{"name":"(anonymous_20)","decl":{"start":{"line":70,"column":47},"end":{"line":70,"column":48}},"loc":{"start":{"line":70,"column":60},"end":{"line":72,"column":9}},"line":70}},"branchMap":{"0":{"loc":{"start":{"line":1,"column":17},"end":{"line":6,"column":1}},"type":"binary-expr","locations":[{"start":{"line":1,"column":18},"end":{"line":1,"column":22}},{"start":{"line":1,"column":26},"end":{"line":1,"column":41}},{"start":{"line":1,"column":46},"end":{"line":6,"column":1}}],"line":1},"1":{"loc":{"start":{"line":2,"column":34},"end":{"line":2,"column":125}},"type":"cond-expr","locations":[{"start":{"line":2,"column":42},"end":{"line":2,"column":48}},{"start":{"line":2,"column":51},"end":{"line":2,"column":125}}],"line":2},"2":{"loc":{"start":{"line":2,"column":51},"end":{"line":2,"column":125}},"type":"cond-expr","locations":[{"start":{"line":2,"column":67},"end":{"line":2,"column":118}},{"start":{"line":2,"column":121},"end":{"line":2,"column":125}}],"line":2},"3":{"loc":{"start":{"line":3,"column":4},"end":{"line":4,"column":150}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":4,"column":150}},{"start":{"line":3,"column":4},"end":{"line":4,"column":150}}],"line":3},"4":{"loc":{"start":{"line":3,"column":8},"end":{"line":3,"column":77}},"type":"binary-expr","locations":[{"start":{"line":3,"column":8},"end":{"line":3,"column":35}},{"start":{"line":3,"column":39},"end":{"line":3,"column":77}}],"line":3},"5":{"loc":{"start":{"line":4,"column":58},"end":{"line":4,"column":150}},"type":"if","locations":[{"start":{"line":4,"column":58},"end":{"line":4,"column":150}},{"start":{"line":4,"column":58},"end":{"line":4,"column":150}}],"line":4},"6":{"loc":{"start":{"line":4,"column":85},"end":{"line":4,"column":149}},"type":"binary-expr","locations":[{"start":{"line":4,"column":86},"end":{"line":4,"column":143}},{"start":{"line":4,"column":148},"end":{"line":4,"column":149}}],"line":4},"7":{"loc":{"start":{"line":4,"column":86},"end":{"line":4,"column":143}},"type":"cond-expr","locations":[{"start":{"line":4,"column":94},"end":{"line":4,"column":98}},{"start":{"line":4,"column":101},"end":{"line":4,"column":143}}],"line":4},"8":{"loc":{"start":{"line":4,"column":101},"end":{"line":4,"column":143}},"type":"cond-expr","locations":[{"start":{"line":4,"column":109},"end":{"line":4,"column":126}},{"start":{"line":4,"column":129},"end":{"line":4,"column":143}}],"line":4},"9":{"loc":{"start":{"line":5,"column":11},"end":{"line":5,"column":62}},"type":"binary-expr","locations":[{"start":{"line":5,"column":11},"end":{"line":5,"column":16}},{"start":{"line":5,"column":20},"end":{"line":5,"column":21}},{"start":{"line":5,"column":25},"end":{"line":5,"column":62}}],"line":5},"10":{"loc":{"start":{"line":7,"column":17},"end":{"line":9,"column":1}},"type":"binary-expr","locations":[{"start":{"line":7,"column":18},"end":{"line":7,"column":22}},{"start":{"line":7,"column":26},"end":{"line":7,"column":41}},{"start":{"line":7,"column":46},"end":{"line":9,"column":1}}],"line":7},"11":{"loc":{"start":{"line":8,"column":4},"end":{"line":8,"column":109}},"type":"if","locations":[{"start":{"line":8,"column":4},"end":{"line":8,"column":109}},{"start":{"line":8,"column":4},"end":{"line":8,"column":109}}],"line":8},"12":{"loc":{"start":{"line":8,"column":8},"end":{"line":8,"column":77}},"type":"binary-expr","locations":[{"start":{"line":8,"column":8},"end":{"line":8,"column":35}},{"start":{"line":8,"column":39},"end":{"line":8,"column":77}}],"line":8},"13":{"loc":{"start":{"line":10,"column":14},"end":{"line":12,"column":1}},"type":"binary-expr","locations":[{"start":{"line":10,"column":15},"end":{"line":10,"column":19}},{"start":{"line":10,"column":23},"end":{"line":10,"column":35}},{"start":{"line":10,"column":40},"end":{"line":12,"column":1}}],"line":10},"14":{"loc":{"start":{"line":13,"column":16},"end":{"line":20,"column":1}},"type":"binary-expr","locations":[{"start":{"line":13,"column":17},"end":{"line":13,"column":21}},{"start":{"line":13,"column":25},"end":{"line":13,"column":39}},{"start":{"line":13,"column":44},"end":{"line":20,"column":1}}],"line":13},"15":{"loc":{"start":{"line":14,"column":16},"end":{"line":14,"column":34}},"type":"binary-expr","locations":[{"start":{"line":14,"column":16},"end":{"line":14,"column":17}},{"start":{"line":14,"column":22},"end":{"line":14,"column":33}}],"line":14},"16":{"loc":{"start":{"line":17,"column":32},"end":{"line":17,"column":148}},"type":"cond-expr","locations":[{"start":{"line":17,"column":46},"end":{"line":17,"column":67}},{"start":{"line":17,"column":70},"end":{"line":17,"column":148}}],"line":17},"17":{"loc":{"start":{"line":18,"column":51},"end":{"line":18,"column":67}},"type":"binary-expr","locations":[{"start":{"line":18,"column":51},"end":{"line":18,"column":61}},{"start":{"line":18,"column":65},"end":{"line":18,"column":67}}],"line":18},"18":{"loc":{"start":{"line":39,"column":12},"end":{"line":41,"column":13}},"type":"if","locations":[{"start":{"line":39,"column":12},"end":{"line":41,"column":13}},{"start":{"line":39,"column":12},"end":{"line":41,"column":13}}],"line":39},"19":{"loc":{"start":{"line":42,"column":12},"end":{"line":44,"column":13}},"type":"if","locations":[{"start":{"line":42,"column":12},"end":{"line":44,"column":13}},{"start":{"line":42,"column":12},"end":{"line":44,"column":13}}],"line":42},"20":{"loc":{"start":{"line":42,"column":16},"end":{"line":42,"column":29}},"type":"binary-expr","locations":[{"start":{"line":42,"column":16},"end":{"line":42,"column":20}},{"start":{"line":42,"column":24},"end":{"line":42,"column":29}}],"line":42},"21":{"loc":{"start":{"line":61,"column":12},"end":{"line":63,"column":13}},"type":"if","locations":[{"start":{"line":61,"column":12},"end":{"line":63,"column":13}},{"start":{"line":61,"column":12},"end":{"line":63,"column":13}}],"line":61},"22":{"loc":{"start":{"line":78,"column":37},"end":{"line":78,"column":159}},"type":"binary-expr","locations":[{"start":{"line":78,"column":37},"end":{"line":78,"column":143}},{"start":{"line":78,"column":147},"end":{"line":78,"column":149}},{"start":{"line":78,"column":153},"end":{"line":78,"column":159}}],"line":78},"23":{"loc":{"start":{"line":78,"column":50},"end":{"line":78,"column":127}},"type":"binary-expr","locations":[{"start":{"line":78,"column":50},"end":{"line":78,"column":98}},{"start":{"line":78,"column":102},"end":{"line":78,"column":127}}],"line":78},"24":{"loc":{"start":{"line":78,"column":161},"end":{"line":78,"column":255}},"type":"binary-expr","locations":[{"start":{"line":78,"column":161},"end":{"line":78,"column":239}},{"start":{"line":78,"column":243},"end":{"line":78,"column":245}},{"start":{"line":78,"column":249},"end":{"line":78,"column":255}}],"line":78},"25":{"loc":{"start":{"line":78,"column":174},"end":{"line":78,"column":223}},"type":"binary-expr","locations":[{"start":{"line":78,"column":174},"end":{"line":78,"column":208}},{"start":{"line":78,"column":212},"end":{"line":78,"column":223}}],"line":78},"26":{"loc":{"start":{"line":78,"column":257},"end":{"line":78,"column":359}},"type":"binary-expr","locations":[{"start":{"line":78,"column":257},"end":{"line":78,"column":343}},{"start":{"line":78,"column":347},"end":{"line":78,"column":349}},{"start":{"line":78,"column":353},"end":{"line":78,"column":359}}],"line":78},"27":{"loc":{"start":{"line":78,"column":270},"end":{"line":78,"column":327}},"type":"binary-expr","locations":[{"start":{"line":78,"column":270},"end":{"line":78,"column":308}},{"start":{"line":78,"column":312},"end":{"line":78,"column":327}}],"line":78}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":13,"17":17,"18":17,"19":2,"20":0,"21":0,"22":0,"23":28,"24":17,"25":13,"26":1,"27":13,"28":13,"29":13,"30":5,"31":5,"32":5,"33":1,"34":4,"35":1,"36":3,"37":2,"38":2,"39":2,"40":2,"41":3,"42":3,"43":3,"44":1,"45":2,"46":2,"47":2,"48":1,"49":1,"50":1},"f":{"0":1,"1":1,"2":1,"3":1,"4":13,"5":13,"6":17,"7":0,"8":28,"9":17,"10":13,"11":5,"12":5,"13":2,"14":2,"15":2,"16":2,"17":3,"18":3,"19":1,"20":1},"b":{"0":[1,0,1],"1":[1,0],"2":[0,0],"3":[1,0],"4":[1,1],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[1,0,0],"10":[1,0,1],"11":[1,0],"12":[1,1],"13":[1,0,1],"14":[1,0,1],"15":[13,13],"16":[11,17],"17":[13,13],"18":[1,4],"19":[1,3],"20":[4,1],"21":[1,2],"22":[1,1,0],"23":[1,1],"24":[1,1,0],"25":[1,1],"26":[1,1,0],"27":[1,1]},"inputSourceMap":{"version":3,"file":"project-accounts.service.js","sourceRoot":"","sources":["project-accounts.service.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA,OAAO,EAAE,UAAU,EAAE,MAAM,gBAAgB,CAAC;AAC5C,OAAO,EAAE,gBAAgB,EAAE,MAAM,iBAAiB,CAAC;AACnD,OAAO,EAAC,yBAAyB,EAAC,MAAM,+BAA+B,CAAC;AACxE,OAAO,EAAC,cAAc,EAAC,MAAM,0BAA0B,CAAC;AACxD,OAAO,EAAE,QAAQ,EAAqB,MAAM,eAAe,CAAC;AAC5D,OAAO,EAAE,WAAW,EAAE,MAAM,wBAAwB,CAAC;AAMrD,OAAO,EAAE,YAAY,EAAE,MAAM,uBAAuB,CAAC;AACrD,OAAO,EAAC,eAAe,EAAC,MAAM,8BAA8B,CAAC;AAG7D,IAAa,sBAAsB,GAAnC;IAEI,YAEmB,yBAAoD,EACpD,WAAwB,EACxB,eAAgC;QAFhC,8BAAyB,GAAzB,yBAAyB,CAA2B;QACpD,gBAAW,GAAX,WAAW,CAAa;QACxB,oBAAe,GAAf,eAAe,CAAiB;IAChD,CAAC;IAEE,QAAQ,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,MAAM,EAAE,SAAS,EAA8B;;YACzE,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,eAAe,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC;YAE9E,IAAI,CAAC,OAAO,EAAE;gBACV,MAAM,IAAI,YAAY,CAAC,QAAQ,CAAC,mBAAmB,CAAC,CAAC;aACxD;YAED,IAAI,IAAI,IAAI,KAAK,EAAE;gBACf,OAAO,MAAM,IAAI,CAAC,yBAAyB,CAAC,sBAAsB,CAAC,EAAE,SAAS,EAAE,EAAE,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC,CAAC;aACtG;YAED,OAAO,MAAM,IAAI,CAAC,yBAAyB,CAAC,QAAQ,CAAC,EAAE,SAAS,EAAE,CAAC,CAAC;QACxE,CAAC;KAAA;IAEK,QAAQ,CAAC,EAAU;;YACrB,OAAO,IAAI,CAAC,yBAAyB,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;QACvD,CAAC;KAAA;IAEK,cAAc,CAAC,EAAE,KAAK,EAAE,SAAS,EAAgC;;YACnE,OAAO,IAAI,CAAC,yBAAyB,CAAC,cAAc,CAAC,KAAK,EAAE,SAAS,CAAC,CAAC;QAC3E,CAAC;KAAA;IAEK,SAAS,CAAC,OAAgC;;YAC5C,MAAM,cAAc,GAAG,MAAM,IAAI,CAAC,yBAAyB,CAAC,cAAc,CAAC,OAAO,CAAC,KAAK,EAAE,OAAO,CAAC,SAAS,CAAC,CAAC;YAE7G,IAAI,cAAc,EAAE;gBAChB,MAAM,IAAI,YAAY,CAAC,QAAQ,CAAC,mBAAmB,CAAC,CAAC;aACxD;YACD,MAAM,UAAU,GAAG,IAAI,cAAc,CAAC,OAAO,CAAC,CAAC;YAC/C,UAAU,CAAC,QAAQ,GAAG,MAAM,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;YAE5E,OAAO,MAAM,IAAI,CAAC,yBAAyB,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QACjE,CAAC;KAAA;IAEK,UAAU,CAAC,EAAU;;YACvB,MAAM,IAAI,CAAC,yBAAyB,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC;QACxD,CAAC;KAAA;CACJ,CAAA;AA9CY,sBAAsB;IADlC,UAAU,EAAE;IAIN,WAAA,gBAAgB,CAAC,yBAAyB,CAAC,CAAA;yDACA,yBAAyB,oBAAzB,yBAAyB,sDACvC,WAAW,oBAAX,WAAW,sDACP,eAAe,oBAAf,eAAe;GAN1C,sBAAsB,CA8ClC;SA9CY,sBAAsB","sourcesContent":["import { Injectable } from '@nestjs/common';\nimport { InjectRepository } from '@nestjs/typeorm';\nimport {ProjectAccountsRepository} from './project-accounts.repository';\nimport {ProjectAccount} from './project-account.entity';\nimport { Messages, PaginatedResponse } from '@bit/alan18081.astra-storage.common.dist';\nimport { HashService } from '@bit/alan18081.astra-storage.common.dist/services';\nimport {\n    CreateProjectAccountDto,\n    FindProjectAccountByEmailDto,\n    FindProjectAccountsListDto,\n} from '@bit/alan18081.astra-storage.common.dist/dto';\nimport { RpcException } from '@nestjs/microservices';\nimport {ProjectsService} from '../projects/projects.service';\n\n@Injectable()\nexport class ProjectAccountsService {\n\n    constructor(\n      @InjectRepository(ProjectAccountsRepository)\n      private readonly projectAccountsRepository: ProjectAccountsRepository,\n      private readonly hashService: HashService,\n      private readonly projectsService: ProjectsService,\n    ) {}\n\n    async findMany({ page, limit, userId, projectId }: FindProjectAccountsListDto): Promise<ProjectAccount[] | PaginatedResponse<ProjectAccount>> {\n        const project = await this.projectsService.findOneByUserId(projectId, userId);\n\n        if (!project) {\n            throw new RpcException(Messages.INVALID_PERMISSIONS);\n        }\n\n        if (page && limit) {\n            return await this.projectAccountsRepository.findManyWithPagination({ projectId }, { page, limit });\n        }\n\n        return await this.projectAccountsRepository.findMany({ projectId });\n    }\n\n    async findById(id: number): Promise<ProjectAccount | undefined> {\n        return this.projectAccountsRepository.findById(id);\n    }\n\n    async findOneByEmail({ email, projectId }: FindProjectAccountByEmailDto): Promise<ProjectAccount | undefined> {\n        return this.projectAccountsRepository.findOneByEmail(email, projectId);\n    }\n\n    async createOne(payload: CreateProjectAccountDto): Promise<ProjectAccount> {\n        const projectAccount = await this.projectAccountsRepository.findOneByEmail(payload.email, payload.projectId);\n\n        if (projectAccount) {\n            throw new RpcException(Messages.USER_ALREADY_EXISTS);\n        }\n        const newAccount = new ProjectAccount(payload);\n        newAccount.password = await this.hashService.generateHash(payload.password);\n\n        return await this.projectAccountsRepository.save(newAccount);\n    }\n\n    async removeById(id: number): Promise<void> {\n        await this.projectAccountsRepository.removeById(id);\n    }\n}"]},"_coverageSchema":"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c","hash":"877974cc06d805387815b8d5ec520c6c68471f93"}
,"/home/alex/PhpstormProjects/astra-storage/ProjectsService/src/components/project-accounts/tests/mocks.ts": {"path":"/home/alex/PhpstormProjects/astra-storage/ProjectsService/src/components/project-accounts/tests/mocks.ts","statementMap":{"0":{"start":{"line":2,"column":34},"end":{"line":9,"column":1}},"1":{"start":{"line":10,"column":35},"end":{"line":10,"column":83}},"2":{"start":{"line":11,"column":45},"end":{"line":20,"column":1}},"3":{"start":{"line":21,"column":31},"end":{"line":24,"column":1}}},"fnMap":{},"branchMap":{},"s":{"0":2,"1":2,"2":2,"3":2},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"mocks.js","sourceRoot":"","sources":["mocks.ts"],"names":[],"mappings":"AAAA,OAAO,EAAC,cAAc,EAAC,MAAM,2BAA2B,CAAC;AAEzD,MAAM,CAAC,MAAM,kBAAkB,GAAG;IAC9B,EAAE,EAAE,EAAE;IACN,KAAK,EAAE,MAAM;IACb,KAAK,EAAE,gBAAgB;IACvB,QAAQ,EAAE,WAAW;IACrB,SAAS,EAAE,CAAC;IACZ,OAAO,EAAE,EAAE;CACd,CAAC;AAEF,MAAM,CAAC,MAAM,mBAAmB,GAAG,CAAC,IAAI,cAAc,CAAC,EAAE,CAAC,EAAE,IAAI,cAAc,CAAC,EAAE,CAAC,CAAC,CAAC;AAEpF,MAAM,CAAC,MAAM,6BAA6B,GAAG;IACzC,QAAQ,KAAI,CAAC;IACb,QAAQ,KAAI,CAAC;IACb,cAAc,KAAI,CAAC;IACnB,IAAI,KAAI,CAAC;IACT,gBAAgB,KAAI,CAAC;IACrB,SAAS,KAAI,CAAC;IACd,UAAU,KAAI,CAAC;IACf,sBAAsB,KAAI,CAAC;CAC9B,CAAC;AAEF,MAAM,CAAC,MAAM,eAAe,GAAG;IAC7B,YAAY,KAAI,CAAC;IACjB,WAAW,KAAI,CAAC;CACjB,CAAC","sourcesContent":["import {ProjectAccount} from '../project-account.entity';\n\nexport const mockProjectAccount = {\n    id: 20,\n    login: 'Alex',\n    email: 'alan@gmail.com',\n    password: 'some hash',\n    projectId: 4,\n    ownerId: 10,\n};\n\nexport const mockProjectAccounts = [new ProjectAccount({}), new ProjectAccount({})];\n\nexport const mockProjectAccountsRepository = {\n    findMany() {},\n    findById() {},\n    findOneByEmail() {},\n    save() {},\n    updateOneAndFind() {},\n    updateOne() {},\n    removeById() {},\n    findManyWithPagination() {},\n};\n\nexport const mockHashService = {\n  generateHash() {},\n  compareHash() {},\n};\n"]},"_coverageSchema":"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c","hash":"803b42d3a2e74b665ee4a605a0db4e38fb95a0cb"}
,"/home/alex/PhpstormProjects/astra-storage/ProjectsService/src/components/projects/project.entity.ts": {"path":"/home/alex/PhpstormProjects/astra-storage/ProjectsService/src/components/projects/project.entity.ts","statementMap":{"0":{"start":{"line":1,"column":17},"end":{"line":6,"column":1}},"1":{"start":{"line":2,"column":12},"end":{"line":2,"column":28}},"2":{"start":{"line":2,"column":34},"end":{"line":2,"column":125}},"3":{"start":{"line":3,"column":4},"end":{"line":4,"column":150}},"4":{"start":{"line":3,"column":79},"end":{"line":3,"column":131}},"5":{"start":{"line":4,"column":9},"end":{"line":4,"column":150}},"6":{"start":{"line":4,"column":58},"end":{"line":4,"column":150}},"7":{"start":{"line":4,"column":81},"end":{"line":4,"column":150}},"8":{"start":{"line":5,"column":4},"end":{"line":5,"column":66}},"9":{"start":{"line":7,"column":17},"end":{"line":9,"column":1}},"10":{"start":{"line":8,"column":4},"end":{"line":8,"column":109}},"11":{"start":{"line":8,"column":79},"end":{"line":8,"column":109}},"12":{"start":{"line":14,"column":14},"end":{"line":19,"column":1}},"13":{"start":{"line":16,"column":8},"end":{"line":16,"column":16}},"14":{"start":{"line":17,"column":8},"end":{"line":17,"column":37}},"15":{"start":{"line":20,"column":0},"end":{"line":23,"column":36}},"16":{"start":{"line":24,"column":0},"end":{"line":27,"column":38}},"17":{"start":{"line":28,"column":0},"end":{"line":31,"column":45}},"18":{"start":{"line":32,"column":0},"end":{"line":35,"column":42}},"19":{"start":{"line":36,"column":0},"end":{"line":39,"column":46}},"20":{"start":{"line":40,"column":0},"end":{"line":43,"column":47}},"21":{"start":{"line":44,"column":0},"end":{"line":47,"column":47}},"22":{"start":{"line":48,"column":0},"end":{"line":51,"column":40}},"23":{"start":{"line":52,"column":0},"end":{"line":55,"column":43}},"24":{"start":{"line":56,"column":0},"end":{"line":59,"column":42}},"25":{"start":{"line":57,"column":22},"end":{"line":57,"column":29}},"26":{"start":{"line":57,"column":42},"end":{"line":57,"column":57}},"27":{"start":{"line":60,"column":0},"end":{"line":63,"column":12}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":1,"column":46},"end":{"line":1,"column":47}},"loc":{"start":{"line":1,"column":87},"end":{"line":6,"column":1}},"line":1},"1":{"name":"(anonymous_1)","decl":{"start":{"line":7,"column":46},"end":{"line":7,"column":47}},"loc":{"start":{"line":7,"column":62},"end":{"line":9,"column":1}},"line":7},"2":{"name":"(anonymous_2)","decl":{"start":{"line":15,"column":4},"end":{"line":15,"column":5}},"loc":{"start":{"line":15,"column":25},"end":{"line":18,"column":5}},"line":15},"3":{"name":"(anonymous_3)","decl":{"start":{"line":57,"column":14},"end":{"line":57,"column":15}},"loc":{"start":{"line":57,"column":22},"end":{"line":57,"column":29}},"line":57},"4":{"name":"(anonymous_4)","decl":{"start":{"line":57,"column":31},"end":{"line":57,"column":32}},"loc":{"start":{"line":57,"column":42},"end":{"line":57,"column":57}},"line":57}},"branchMap":{"0":{"loc":{"start":{"line":1,"column":17},"end":{"line":6,"column":1}},"type":"binary-expr","locations":[{"start":{"line":1,"column":18},"end":{"line":1,"column":22}},{"start":{"line":1,"column":26},"end":{"line":1,"column":41}},{"start":{"line":1,"column":46},"end":{"line":6,"column":1}}],"line":1},"1":{"loc":{"start":{"line":2,"column":34},"end":{"line":2,"column":125}},"type":"cond-expr","locations":[{"start":{"line":2,"column":42},"end":{"line":2,"column":48}},{"start":{"line":2,"column":51},"end":{"line":2,"column":125}}],"line":2},"2":{"loc":{"start":{"line":2,"column":51},"end":{"line":2,"column":125}},"type":"cond-expr","locations":[{"start":{"line":2,"column":67},"end":{"line":2,"column":118}},{"start":{"line":2,"column":121},"end":{"line":2,"column":125}}],"line":2},"3":{"loc":{"start":{"line":3,"column":4},"end":{"line":4,"column":150}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":4,"column":150}},{"start":{"line":3,"column":4},"end":{"line":4,"column":150}}],"line":3},"4":{"loc":{"start":{"line":3,"column":8},"end":{"line":3,"column":77}},"type":"binary-expr","locations":[{"start":{"line":3,"column":8},"end":{"line":3,"column":35}},{"start":{"line":3,"column":39},"end":{"line":3,"column":77}}],"line":3},"5":{"loc":{"start":{"line":4,"column":58},"end":{"line":4,"column":150}},"type":"if","locations":[{"start":{"line":4,"column":58},"end":{"line":4,"column":150}},{"start":{"line":4,"column":58},"end":{"line":4,"column":150}}],"line":4},"6":{"loc":{"start":{"line":4,"column":85},"end":{"line":4,"column":149}},"type":"binary-expr","locations":[{"start":{"line":4,"column":86},"end":{"line":4,"column":143}},{"start":{"line":4,"column":148},"end":{"line":4,"column":149}}],"line":4},"7":{"loc":{"start":{"line":4,"column":86},"end":{"line":4,"column":143}},"type":"cond-expr","locations":[{"start":{"line":4,"column":94},"end":{"line":4,"column":98}},{"start":{"line":4,"column":101},"end":{"line":4,"column":143}}],"line":4},"8":{"loc":{"start":{"line":4,"column":101},"end":{"line":4,"column":143}},"type":"cond-expr","locations":[{"start":{"line":4,"column":109},"end":{"line":4,"column":126}},{"start":{"line":4,"column":129},"end":{"line":4,"column":143}}],"line":4},"9":{"loc":{"start":{"line":5,"column":11},"end":{"line":5,"column":62}},"type":"binary-expr","locations":[{"start":{"line":5,"column":11},"end":{"line":5,"column":16}},{"start":{"line":5,"column":20},"end":{"line":5,"column":21}},{"start":{"line":5,"column":25},"end":{"line":5,"column":62}}],"line":5},"10":{"loc":{"start":{"line":7,"column":17},"end":{"line":9,"column":1}},"type":"binary-expr","locations":[{"start":{"line":7,"column":18},"end":{"line":7,"column":22}},{"start":{"line":7,"column":26},"end":{"line":7,"column":41}},{"start":{"line":7,"column":46},"end":{"line":9,"column":1}}],"line":7},"11":{"loc":{"start":{"line":8,"column":4},"end":{"line":8,"column":109}},"type":"if","locations":[{"start":{"line":8,"column":4},"end":{"line":8,"column":109}},{"start":{"line":8,"column":4},"end":{"line":8,"column":109}}],"line":8},"12":{"loc":{"start":{"line":8,"column":8},"end":{"line":8,"column":77}},"type":"binary-expr","locations":[{"start":{"line":8,"column":8},"end":{"line":8,"column":35}},{"start":{"line":8,"column":39},"end":{"line":8,"column":77}}],"line":8},"13":{"loc":{"start":{"line":54,"column":30},"end":{"line":54,"column":110}},"type":"binary-expr","locations":[{"start":{"line":54,"column":30},"end":{"line":54,"column":94}},{"start":{"line":54,"column":98},"end":{"line":54,"column":100}},{"start":{"line":54,"column":104},"end":{"line":54,"column":110}}],"line":54},"14":{"loc":{"start":{"line":54,"column":43},"end":{"line":54,"column":78}},"type":"binary-expr","locations":[{"start":{"line":54,"column":43},"end":{"line":54,"column":70}},{"start":{"line":54,"column":74},"end":{"line":54,"column":78}}],"line":54},"15":{"loc":{"start":{"line":62,"column":37},"end":{"line":62,"column":123}},"type":"binary-expr","locations":[{"start":{"line":62,"column":37},"end":{"line":62,"column":107}},{"start":{"line":62,"column":111},"end":{"line":62,"column":113}},{"start":{"line":62,"column":117},"end":{"line":62,"column":123}}],"line":62},"16":{"loc":{"start":{"line":62,"column":50},"end":{"line":62,"column":91}},"type":"binary-expr","locations":[{"start":{"line":62,"column":50},"end":{"line":62,"column":80}},{"start":{"line":62,"column":84},"end":{"line":62,"column":91}}],"line":62}},"s":{"0":5,"1":55,"2":55,"3":55,"4":55,"5":0,"6":0,"7":0,"8":55,"9":5,"10":55,"11":55,"12":5,"13":9,"14":9,"15":5,"16":5,"17":5,"18":5,"19":5,"20":5,"21":5,"22":5,"23":5,"24":5,"25":0,"26":0,"27":5},"f":{"0":55,"1":55,"2":9,"3":0,"4":0},"b":{"0":[5,0,5],"1":[5,50],"2":[0,50],"3":[55,0],"4":[55,55],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[55,50,0],"10":[5,0,5],"11":[55,0],"12":[55,55],"13":[5,5,0],"14":[5,5],"15":[5,0,5],"16":[5,0]},"inputSourceMap":{"version":3,"file":"project.entity.js","sourceRoot":"","sources":["project.entity.ts"],"names":[],"mappings":";;;;;;;;;;AAAA,OAAO,EAAE,UAAU,EAAY,MAAM,eAAe,CAAC;AAErD,OAAO,EAAE,MAAM,EAAE,gBAAgB,EAAE,MAAM,EAAE,SAAS,EAAE,sBAAsB,EAAE,MAAM,SAAS,CAAC;AAC9F,OAAO,EAAE,OAAO,EAAE,MAAM,4BAA4B,CAAC;AAGrD,IAAa,OAAO,GAApB,aAAqB,SAAQ,UAAU;IAgCnC,YAAY,OAAyB;QACjC,KAAK,EAAE,CAAC;QACR,MAAM,CAAC,MAAM,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;IACjC,CAAC;CAGJ,CAAA;AAnCG;IADC,sBAAsB,EAAE;;mCACd;AAGX;IADC,MAAM,CAAC,SAAS,CAAC;;qCACL;AAGb;IADC,MAAM,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;;4CACpB;AAGrB;IADC,MAAM,CAAC,SAAS,CAAC;;yCACD;AAGjB;IADC,MAAM,CAAC,SAAS,CAAC;;6CACG;AAGrB;IADC,MAAM,CAAC,EAAE,IAAI,EAAE,SAAS,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;;8CACrB;AAGvB;IADC,MAAM,CAAC,EAAE,IAAI,EAAE,SAAS,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC;;8CAClB;AAGtB;IADC,MAAM,CAAC,SAAS,CAAC;;uCACH;AAGf;IADC,gBAAgB,EAAE;kDACR,IAAI,oBAAJ,IAAI;0CAAC;AAGhB;IADC,SAAS,CAAC,IAAI,CAAC,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC,EAAE,CAAC,OAAO,CAAC,OAAO,CAAC;;yCACnC;AA9BX,OAAO;IADnB,MAAM,EAAE;yDAiCgB,OAAO,oBAAP,OAAO;GAhCnB,OAAO,CAsCnB;SAtCY,OAAO","sourcesContent":["import { BaseEntity, IProject } from '@bit/alan18081.astra-storage.common.dist';\nimport { toNumber } from 'lodash';\nimport { Column, CreateDateColumn, Entity, OneToMany, PrimaryGeneratedColumn } from 'typeorm';\nimport { Storage } from '../storages/storage.entity';\n\n@Entity()\nexport class Project extends BaseEntity implements IProject {\n\n    @PrimaryGeneratedColumn()\n    id: number;\n\n    @Column('varchar')\n    name: string;\n\n    @Column({ type: 'text', nullable: true })\n    description?: string;\n\n    @Column('varchar')\n    clientId: string;\n\n    @Column('varchar')\n    clientSecret: string;\n\n    @Column({ type: 'integer', nullable: true })\n    authProjectId?: number;\n\n    @Column({ type: 'integer', default: 0 })\n    storagesCount: number;\n\n    @Column('integer')\n    userId: number;\n\n    @CreateDateColumn()\n    createdAt: Date;\n\n    @OneToMany(type => Storage, storage => storage.project)\n    storages: Storage[];\n\n    constructor(partial: Partial<Project>) {\n        super();\n        Object.assign(this, partial);\n    }\n\n\n}"]},"_coverageSchema":"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c","hash":"be173cfa1495518fbe79f4a1a4b07c45b3e47aa7"}
,"/home/alex/PhpstormProjects/astra-storage/ProjectsService/src/components/projects/projects.repository.ts": {"path":"/home/alex/PhpstormProjects/astra-storage/ProjectsService/src/components/projects/projects.repository.ts","statementMap":{"0":{"start":{"line":1,"column":17},"end":{"line":6,"column":1}},"1":{"start":{"line":2,"column":12},"end":{"line":2,"column":28}},"2":{"start":{"line":2,"column":34},"end":{"line":2,"column":125}},"3":{"start":{"line":3,"column":4},"end":{"line":4,"column":150}},"4":{"start":{"line":3,"column":79},"end":{"line":3,"column":131}},"5":{"start":{"line":4,"column":9},"end":{"line":4,"column":150}},"6":{"start":{"line":4,"column":58},"end":{"line":4,"column":150}},"7":{"start":{"line":4,"column":81},"end":{"line":4,"column":150}},"8":{"start":{"line":5,"column":4},"end":{"line":5,"column":66}},"9":{"start":{"line":7,"column":16},"end":{"line":14,"column":1}},"10":{"start":{"line":8,"column":4},"end":{"line":13,"column":7}},"11":{"start":{"line":9,"column":36},"end":{"line":9,"column":97}},"12":{"start":{"line":9,"column":42},"end":{"line":9,"column":70}},"13":{"start":{"line":9,"column":85},"end":{"line":9,"column":95}},"14":{"start":{"line":10,"column":35},"end":{"line":10,"column":100}},"15":{"start":{"line":10,"column":41},"end":{"line":10,"column":73}},"16":{"start":{"line":10,"column":88},"end":{"line":10,"column":98}},"17":{"start":{"line":11,"column":32},"end":{"line":11,"column":149}},"18":{"start":{"line":11,"column":97},"end":{"line":11,"column":119}},"19":{"start":{"line":12,"column":8},"end":{"line":12,"column":78}},"20":{"start":{"line":18,"column":25},"end":{"line":62,"column":1}},"21":{"start":{"line":20,"column":8},"end":{"line":22,"column":11}},"22":{"start":{"line":21,"column":12},"end":{"line":21,"column":41}},"23":{"start":{"line":25,"column":8},"end":{"line":27,"column":11}},"24":{"start":{"line":26,"column":12},"end":{"line":26,"column":48}},"25":{"start":{"line":30,"column":8},"end":{"line":32,"column":11}},"26":{"start":{"line":31,"column":12},"end":{"line":31,"column":40}},"27":{"start":{"line":35,"column":8},"end":{"line":37,"column":11}},"28":{"start":{"line":36,"column":12},"end":{"line":36,"column":60}},"29":{"start":{"line":40,"column":8},"end":{"line":43,"column":11}},"30":{"start":{"line":41,"column":12},"end":{"line":41,"column":44}},"31":{"start":{"line":42,"column":12},"end":{"line":42,"column":37}},"32":{"start":{"line":46,"column":8},"end":{"line":48,"column":11}},"33":{"start":{"line":47,"column":12},"end":{"line":47,"column":46}},"34":{"start":{"line":51,"column":8},"end":{"line":54,"column":11}},"35":{"start":{"line":52,"column":12},"end":{"line":52,"column":61}},"36":{"start":{"line":53,"column":12},"end":{"line":53,"column":37}},"37":{"start":{"line":57,"column":8},"end":{"line":60,"column":11}},"38":{"start":{"line":58,"column":12},"end":{"line":58,"column":61}},"39":{"start":{"line":59,"column":12},"end":{"line":59,"column":37}},"40":{"start":{"line":63,"column":0},"end":{"line":65,"column":23}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":1,"column":46},"end":{"line":1,"column":47}},"loc":{"start":{"line":1,"column":87},"end":{"line":6,"column":1}},"line":1},"1":{"name":"(anonymous_1)","decl":{"start":{"line":7,"column":44},"end":{"line":7,"column":45}},"loc":{"start":{"line":7,"column":89},"end":{"line":14,"column":1}},"line":7},"2":{"name":"(anonymous_2)","decl":{"start":{"line":8,"column":36},"end":{"line":8,"column":37}},"loc":{"start":{"line":8,"column":63},"end":{"line":13,"column":5}},"line":8},"3":{"name":"fulfilled","decl":{"start":{"line":9,"column":17},"end":{"line":9,"column":26}},"loc":{"start":{"line":9,"column":34},"end":{"line":9,"column":99}},"line":9},"4":{"name":"rejected","decl":{"start":{"line":10,"column":17},"end":{"line":10,"column":25}},"loc":{"start":{"line":10,"column":33},"end":{"line":10,"column":102}},"line":10},"5":{"name":"step","decl":{"start":{"line":11,"column":17},"end":{"line":11,"column":21}},"loc":{"start":{"line":11,"column":30},"end":{"line":11,"column":151}},"line":11},"6":{"name":"(anonymous_6)","decl":{"start":{"line":11,"column":76},"end":{"line":11,"column":77}},"loc":{"start":{"line":11,"column":95},"end":{"line":11,"column":121}},"line":11},"7":{"name":"(anonymous_7)","decl":{"start":{"line":19,"column":4},"end":{"line":19,"column":5}},"loc":{"start":{"line":19,"column":27},"end":{"line":23,"column":5}},"line":19},"8":{"name":"(anonymous_8)","decl":{"start":{"line":20,"column":47},"end":{"line":20,"column":48}},"loc":{"start":{"line":20,"column":60},"end":{"line":22,"column":9}},"line":20},"9":{"name":"(anonymous_9)","decl":{"start":{"line":24,"column":4},"end":{"line":24,"column":5}},"loc":{"start":{"line":24,"column":32},"end":{"line":28,"column":5}},"line":24},"10":{"name":"(anonymous_10)","decl":{"start":{"line":25,"column":47},"end":{"line":25,"column":48}},"loc":{"start":{"line":25,"column":60},"end":{"line":27,"column":9}},"line":25},"11":{"name":"(anonymous_11)","decl":{"start":{"line":29,"column":4},"end":{"line":29,"column":5}},"loc":{"start":{"line":29,"column":17},"end":{"line":33,"column":5}},"line":29},"12":{"name":"(anonymous_12)","decl":{"start":{"line":30,"column":47},"end":{"line":30,"column":48}},"loc":{"start":{"line":30,"column":60},"end":{"line":32,"column":9}},"line":30},"13":{"name":"(anonymous_13)","decl":{"start":{"line":34,"column":4},"end":{"line":34,"column":5}},"loc":{"start":{"line":34,"column":48},"end":{"line":38,"column":5}},"line":34},"14":{"name":"(anonymous_14)","decl":{"start":{"line":35,"column":47},"end":{"line":35,"column":48}},"loc":{"start":{"line":35,"column":60},"end":{"line":37,"column":9}},"line":35},"15":{"name":"(anonymous_15)","decl":{"start":{"line":39,"column":4},"end":{"line":39,"column":5}},"loc":{"start":{"line":39,"column":31},"end":{"line":44,"column":5}},"line":39},"16":{"name":"(anonymous_16)","decl":{"start":{"line":40,"column":47},"end":{"line":40,"column":48}},"loc":{"start":{"line":40,"column":60},"end":{"line":43,"column":9}},"line":40},"17":{"name":"(anonymous_17)","decl":{"start":{"line":45,"column":4},"end":{"line":45,"column":5}},"loc":{"start":{"line":45,"column":27},"end":{"line":49,"column":5}},"line":45},"18":{"name":"(anonymous_18)","decl":{"start":{"line":46,"column":47},"end":{"line":46,"column":48}},"loc":{"start":{"line":46,"column":60},"end":{"line":48,"column":9}},"line":46},"19":{"name":"(anonymous_19)","decl":{"start":{"line":50,"column":4},"end":{"line":50,"column":5}},"loc":{"start":{"line":50,"column":31},"end":{"line":55,"column":5}},"line":50},"20":{"name":"(anonymous_20)","decl":{"start":{"line":51,"column":47},"end":{"line":51,"column":48}},"loc":{"start":{"line":51,"column":60},"end":{"line":54,"column":9}},"line":51},"21":{"name":"(anonymous_21)","decl":{"start":{"line":56,"column":4},"end":{"line":56,"column":5}},"loc":{"start":{"line":56,"column":31},"end":{"line":61,"column":5}},"line":56},"22":{"name":"(anonymous_22)","decl":{"start":{"line":57,"column":47},"end":{"line":57,"column":48}},"loc":{"start":{"line":57,"column":60},"end":{"line":60,"column":9}},"line":57}},"branchMap":{"0":{"loc":{"start":{"line":1,"column":17},"end":{"line":6,"column":1}},"type":"binary-expr","locations":[{"start":{"line":1,"column":18},"end":{"line":1,"column":22}},{"start":{"line":1,"column":26},"end":{"line":1,"column":41}},{"start":{"line":1,"column":46},"end":{"line":6,"column":1}}],"line":1},"1":{"loc":{"start":{"line":2,"column":34},"end":{"line":2,"column":125}},"type":"cond-expr","locations":[{"start":{"line":2,"column":42},"end":{"line":2,"column":48}},{"start":{"line":2,"column":51},"end":{"line":2,"column":125}}],"line":2},"2":{"loc":{"start":{"line":2,"column":51},"end":{"line":2,"column":125}},"type":"cond-expr","locations":[{"start":{"line":2,"column":67},"end":{"line":2,"column":118}},{"start":{"line":2,"column":121},"end":{"line":2,"column":125}}],"line":2},"3":{"loc":{"start":{"line":3,"column":4},"end":{"line":4,"column":150}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":4,"column":150}},{"start":{"line":3,"column":4},"end":{"line":4,"column":150}}],"line":3},"4":{"loc":{"start":{"line":3,"column":8},"end":{"line":3,"column":77}},"type":"binary-expr","locations":[{"start":{"line":3,"column":8},"end":{"line":3,"column":35}},{"start":{"line":3,"column":39},"end":{"line":3,"column":77}}],"line":3},"5":{"loc":{"start":{"line":4,"column":58},"end":{"line":4,"column":150}},"type":"if","locations":[{"start":{"line":4,"column":58},"end":{"line":4,"column":150}},{"start":{"line":4,"column":58},"end":{"line":4,"column":150}}],"line":4},"6":{"loc":{"start":{"line":4,"column":85},"end":{"line":4,"column":149}},"type":"binary-expr","locations":[{"start":{"line":4,"column":86},"end":{"line":4,"column":143}},{"start":{"line":4,"column":148},"end":{"line":4,"column":149}}],"line":4},"7":{"loc":{"start":{"line":4,"column":86},"end":{"line":4,"column":143}},"type":"cond-expr","locations":[{"start":{"line":4,"column":94},"end":{"line":4,"column":98}},{"start":{"line":4,"column":101},"end":{"line":4,"column":143}}],"line":4},"8":{"loc":{"start":{"line":4,"column":101},"end":{"line":4,"column":143}},"type":"cond-expr","locations":[{"start":{"line":4,"column":109},"end":{"line":4,"column":126}},{"start":{"line":4,"column":129},"end":{"line":4,"column":143}}],"line":4},"9":{"loc":{"start":{"line":5,"column":11},"end":{"line":5,"column":62}},"type":"binary-expr","locations":[{"start":{"line":5,"column":11},"end":{"line":5,"column":16}},{"start":{"line":5,"column":20},"end":{"line":5,"column":21}},{"start":{"line":5,"column":25},"end":{"line":5,"column":62}}],"line":5},"10":{"loc":{"start":{"line":7,"column":16},"end":{"line":14,"column":1}},"type":"binary-expr","locations":[{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},{"start":{"line":7,"column":25},"end":{"line":7,"column":39}},{"start":{"line":7,"column":44},"end":{"line":14,"column":1}}],"line":7},"11":{"loc":{"start":{"line":8,"column":16},"end":{"line":8,"column":34}},"type":"binary-expr","locations":[{"start":{"line":8,"column":16},"end":{"line":8,"column":17}},{"start":{"line":8,"column":22},"end":{"line":8,"column":33}}],"line":8},"12":{"loc":{"start":{"line":11,"column":32},"end":{"line":11,"column":148}},"type":"cond-expr","locations":[{"start":{"line":11,"column":46},"end":{"line":11,"column":67}},{"start":{"line":11,"column":70},"end":{"line":11,"column":148}}],"line":11},"13":{"loc":{"start":{"line":12,"column":51},"end":{"line":12,"column":67}},"type":"binary-expr","locations":[{"start":{"line":12,"column":51},"end":{"line":12,"column":61}},{"start":{"line":12,"column":65},"end":{"line":12,"column":67}}],"line":12}},"s":{"0":5,"1":5,"2":5,"3":5,"4":5,"5":0,"6":0,"7":0,"8":5,"9":5,"10":14,"11":10,"12":10,"13":0,"14":0,"15":0,"16":0,"17":24,"18":10,"19":14,"20":5,"21":0,"22":0,"23":0,"24":0,"25":2,"26":2,"27":2,"28":2,"29":3,"30":3,"31":3,"32":1,"33":1,"34":3,"35":3,"36":3,"37":3,"38":3,"39":3,"40":5},"f":{"0":5,"1":14,"2":14,"3":10,"4":0,"5":24,"6":10,"7":0,"8":0,"9":0,"10":0,"11":2,"12":2,"13":2,"14":2,"15":3,"16":3,"17":1,"18":1,"19":3,"20":3,"21":3,"22":3},"b":{"0":[5,0,5],"1":[5,0],"2":[0,0],"3":[5,0],"4":[5,5],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[5,0,0],"10":[5,0,5],"11":[14,14],"12":[14,10],"13":[14,14]},"inputSourceMap":{"version":3,"file":"projects.repository.js","sourceRoot":"","sources":["projects.repository.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA,OAAO,EAAE,gBAAgB,EAAE,MAAM,SAAS,CAAC;AAC3C,OAAO,EAAE,UAAU,EAAE,MAAM,SAAS,CAAC;AACrC,OAAO,EAAE,OAAO,EAAE,MAAM,kBAAkB,CAAC;AAG3C,IAAa,kBAAkB,GAA/B,wBAAgC,SAAQ,UAAmB;IAEnD,cAAc,CAAC,MAAc;;YACjC,OAAO,IAAI,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,CAAC,CAAC;QAC/B,CAAC;KAAA;IAEK,eAAe,CAAC,EAAU,EAAE,MAAc;;YAC9C,OAAO,IAAI,CAAC,OAAO,CAAC,EAAE,EAAE,EAAE,MAAM,EAAE,CAAC,CAAC;QACtC,CAAC;KAAA;IAEK,QAAQ,CAAC,EAAU;;YACvB,OAAO,IAAI,CAAC,OAAO,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;QAC9B,CAAC;KAAA;IAEK,mBAAmB,CAAC,QAAgB,EAAE,YAAoB;;YAC9D,OAAO,IAAI,CAAC,OAAO,CAAC,EAAE,QAAQ,EAAE,YAAY,EAAE,CAAC,CAAC;QAClD,CAAC;KAAA;IAEK,gBAAgB,CAAC,EAAU,EAAE,IAAsB;;YACvD,MAAM,IAAI,CAAC,MAAM,CAAC,EAAE,EAAE,EAAE,EAAE,IAAI,CAAC,CAAC;YAChC,OAAO,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;QAC3B,CAAC;KAAA;IAEK,UAAU,CAAC,EAAU,EAAE,MAAc;;YACzC,MAAM,IAAI,CAAC,MAAM,CAAC,EAAE,EAAE,EAAE,MAAM,EAAE,CAAC,CAAC;QACpC,CAAC;KAAA;IAEK,sBAAsB,CAAC,EAAU;;YACrC,MAAM,IAAI,CAAC,SAAS,CAAC,EAAE,EAAE,EAAE,EAAE,eAAe,EAAE,CAAC,CAAC,CAAC;YACjD,OAAO,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;QAC3B,CAAC;KAAA;IAEK,sBAAsB,CAAC,EAAU;;YACnC,MAAM,IAAI,CAAC,SAAS,CAAC,EAAE,EAAE,EAAE,EAAE,eAAe,EAAE,CAAC,CAAC,CAAC;YACjD,OAAO,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;QAC7B,CAAC;KAAA;CAEF,CAAA;AArCY,kBAAkB;IAD9B,gBAAgB,CAAC,OAAO,CAAC;GACb,kBAAkB,CAqC9B;SArCY,kBAAkB","sourcesContent":["import { EntityRepository } from 'typeorm';\nimport { Repository } from 'typeorm';\nimport { Project } from './project.entity';\n\n@EntityRepository(Project)\nexport class ProjectsRepository extends Repository<Project> {\n\n  async findManyByUser(userId: number): Promise<Project[]> {\n    return this.find({ userId });\n  }\n\n  async findOneByUserId(id: number, userId: number): Promise<Project | undefined> {\n    return this.findOne({ id, userId });\n  }\n\n  async findById(id: number): Promise<Project | undefined> {\n    return this.findOne({ id });\n  }\n\n  async findOneByClientInfo(clientId: string, clientSecret: string): Promise<Project | undefined> {\n    return this.findOne({ clientId, clientSecret });\n  }\n\n  async updateOneAndFind(id: number, data: Partial<Project>): Promise<Project | undefined> {\n    await this.update({ id }, data);\n    return this.findById(id);\n  }\n\n  async removeById(id: number, userId: number): Promise<void> {\n    await this.delete({ id, userId });\n  }\n\n  async incrementStoragesCount(id: number): Promise<Project | undefined> {\n    await this.increment({ id }, 'storagesCount', 1);\n    return this.findById(id);\n  }\n\n  async decrementStoragesCount(id: number): Promise<Project | undefined> {\n      await this.decrement({ id }, 'storagesCount', 1);\n      return this.findById(id);\n  }\n\n}"]},"_coverageSchema":"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c","hash":"804dcda24c084bde100c58e4b46e76abc2e644c4"}
,"/home/alex/PhpstormProjects/astra-storage/ProjectsService/src/components/projects/projects.service.ts": {"path":"/home/alex/PhpstormProjects/astra-storage/ProjectsService/src/components/projects/projects.service.ts","statementMap":{"0":{"start":{"line":1,"column":17},"end":{"line":6,"column":1}},"1":{"start":{"line":2,"column":12},"end":{"line":2,"column":28}},"2":{"start":{"line":2,"column":34},"end":{"line":2,"column":125}},"3":{"start":{"line":3,"column":4},"end":{"line":4,"column":150}},"4":{"start":{"line":3,"column":79},"end":{"line":3,"column":131}},"5":{"start":{"line":4,"column":9},"end":{"line":4,"column":150}},"6":{"start":{"line":4,"column":58},"end":{"line":4,"column":150}},"7":{"start":{"line":4,"column":81},"end":{"line":4,"column":150}},"8":{"start":{"line":5,"column":4},"end":{"line":5,"column":66}},"9":{"start":{"line":7,"column":17},"end":{"line":9,"column":1}},"10":{"start":{"line":8,"column":4},"end":{"line":8,"column":109}},"11":{"start":{"line":8,"column":79},"end":{"line":8,"column":109}},"12":{"start":{"line":10,"column":14},"end":{"line":12,"column":1}},"13":{"start":{"line":11,"column":4},"end":{"line":11,"column":73}},"14":{"start":{"line":11,"column":36},"end":{"line":11,"column":71}},"15":{"start":{"line":13,"column":16},"end":{"line":20,"column":1}},"16":{"start":{"line":14,"column":4},"end":{"line":19,"column":7}},"17":{"start":{"line":15,"column":36},"end":{"line":15,"column":97}},"18":{"start":{"line":15,"column":42},"end":{"line":15,"column":70}},"19":{"start":{"line":15,"column":85},"end":{"line":15,"column":95}},"20":{"start":{"line":16,"column":35},"end":{"line":16,"column":100}},"21":{"start":{"line":16,"column":41},"end":{"line":16,"column":73}},"22":{"start":{"line":16,"column":88},"end":{"line":16,"column":98}},"23":{"start":{"line":17,"column":32},"end":{"line":17,"column":149}},"24":{"start":{"line":17,"column":97},"end":{"line":17,"column":119}},"25":{"start":{"line":18,"column":8},"end":{"line":18,"column":78}},"26":{"start":{"line":21,"column":13},"end":{"line":29,"column":1}},"27":{"start":{"line":22,"column":12},"end":{"line":22,"column":14}},"28":{"start":{"line":23,"column":4},"end":{"line":24,"column":20}},"29":{"start":{"line":23,"column":21},"end":{"line":24,"column":20}},"30":{"start":{"line":24,"column":8},"end":{"line":24,"column":20}},"31":{"start":{"line":25,"column":4},"end":{"line":27,"column":30}},"32":{"start":{"line":26,"column":8},"end":{"line":27,"column":30}},"33":{"start":{"line":26,"column":80},"end":{"line":27,"column":30}},"34":{"start":{"line":27,"column":12},"end":{"line":27,"column":30}},"35":{"start":{"line":28,"column":4},"end":{"line":28,"column":13}},"36":{"start":{"line":36,"column":22},"end":{"line":85,"column":1}},"37":{"start":{"line":38,"column":8},"end":{"line":38,"column":53}},"38":{"start":{"line":39,"column":8},"end":{"line":39,"column":35}},"39":{"start":{"line":42,"column":8},"end":{"line":44,"column":11}},"40":{"start":{"line":43,"column":12},"end":{"line":43,"column":66}},"41":{"start":{"line":47,"column":8},"end":{"line":49,"column":11}},"42":{"start":{"line":48,"column":12},"end":{"line":48,"column":56}},"43":{"start":{"line":52,"column":8},"end":{"line":54,"column":11}},"44":{"start":{"line":53,"column":12},"end":{"line":53,"column":71}},"45":{"start":{"line":57,"column":8},"end":{"line":62,"column":11}},"46":{"start":{"line":58,"column":28},"end":{"line":58,"column":64}},"47":{"start":{"line":59,"column":12},"end":{"line":59,"column":56}},"48":{"start":{"line":60,"column":12},"end":{"line":60,"column":60}},"49":{"start":{"line":61,"column":12},"end":{"line":61,"column":57}},"50":{"start":{"line":65,"column":8},"end":{"line":67,"column":11}},"51":{"start":{"line":66,"column":12},"end":{"line":66,"column":95}},"52":{"start":{"line":70,"column":29},"end":{"line":70,"column":31}},"53":{"start":{"line":70,"column":40},"end":{"line":70,"column":68}},"54":{"start":{"line":71,"column":8},"end":{"line":73,"column":11}},"55":{"start":{"line":72,"column":12},"end":{"line":72,"column":89}},"56":{"start":{"line":76,"column":8},"end":{"line":78,"column":11}},"57":{"start":{"line":77,"column":12},"end":{"line":77,"column":65}},"58":{"start":{"line":81,"column":8},"end":{"line":83,"column":11}},"59":{"start":{"line":82,"column":12},"end":{"line":82,"column":88}},"60":{"start":{"line":86,"column":0},"end":{"line":90,"column":20}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":1,"column":46},"end":{"line":1,"column":47}},"loc":{"start":{"line":1,"column":87},"end":{"line":6,"column":1}},"line":1},"1":{"name":"(anonymous_1)","decl":{"start":{"line":7,"column":46},"end":{"line":7,"column":47}},"loc":{"start":{"line":7,"column":62},"end":{"line":9,"column":1}},"line":7},"2":{"name":"(anonymous_2)","decl":{"start":{"line":10,"column":40},"end":{"line":10,"column":41}},"loc":{"start":{"line":10,"column":73},"end":{"line":12,"column":1}},"line":10},"3":{"name":"(anonymous_3)","decl":{"start":{"line":11,"column":11},"end":{"line":11,"column":12}},"loc":{"start":{"line":11,"column":34},"end":{"line":11,"column":73}},"line":11},"4":{"name":"(anonymous_4)","decl":{"start":{"line":13,"column":44},"end":{"line":13,"column":45}},"loc":{"start":{"line":13,"column":89},"end":{"line":20,"column":1}},"line":13},"5":{"name":"(anonymous_5)","decl":{"start":{"line":14,"column":36},"end":{"line":14,"column":37}},"loc":{"start":{"line":14,"column":63},"end":{"line":19,"column":5}},"line":14},"6":{"name":"fulfilled","decl":{"start":{"line":15,"column":17},"end":{"line":15,"column":26}},"loc":{"start":{"line":15,"column":34},"end":{"line":15,"column":99}},"line":15},"7":{"name":"rejected","decl":{"start":{"line":16,"column":17},"end":{"line":16,"column":25}},"loc":{"start":{"line":16,"column":33},"end":{"line":16,"column":102}},"line":16},"8":{"name":"step","decl":{"start":{"line":17,"column":17},"end":{"line":17,"column":21}},"loc":{"start":{"line":17,"column":30},"end":{"line":17,"column":151}},"line":17},"9":{"name":"(anonymous_9)","decl":{"start":{"line":17,"column":76},"end":{"line":17,"column":77}},"loc":{"start":{"line":17,"column":95},"end":{"line":17,"column":121}},"line":17},"10":{"name":"(anonymous_10)","decl":{"start":{"line":21,"column":38},"end":{"line":21,"column":39}},"loc":{"start":{"line":21,"column":54},"end":{"line":29,"column":1}},"line":21},"11":{"name":"(anonymous_11)","decl":{"start":{"line":37,"column":4},"end":{"line":37,"column":5}},"loc":{"start":{"line":37,"column":36},"end":{"line":40,"column":5}},"line":37},"12":{"name":"(anonymous_12)","decl":{"start":{"line":41,"column":4},"end":{"line":41,"column":5}},"loc":{"start":{"line":41,"column":27},"end":{"line":45,"column":5}},"line":41},"13":{"name":"(anonymous_13)","decl":{"start":{"line":42,"column":47},"end":{"line":42,"column":48}},"loc":{"start":{"line":42,"column":60},"end":{"line":44,"column":9}},"line":42},"14":{"name":"(anonymous_14)","decl":{"start":{"line":46,"column":4},"end":{"line":46,"column":5}},"loc":{"start":{"line":46,"column":17},"end":{"line":50,"column":5}},"line":46},"15":{"name":"(anonymous_15)","decl":{"start":{"line":47,"column":47},"end":{"line":47,"column":48}},"loc":{"start":{"line":47,"column":60},"end":{"line":49,"column":9}},"line":47},"16":{"name":"(anonymous_16)","decl":{"start":{"line":51,"column":4},"end":{"line":51,"column":5}},"loc":{"start":{"line":51,"column":32},"end":{"line":55,"column":5}},"line":51},"17":{"name":"(anonymous_17)","decl":{"start":{"line":52,"column":47},"end":{"line":52,"column":48}},"loc":{"start":{"line":52,"column":60},"end":{"line":54,"column":9}},"line":52},"18":{"name":"(anonymous_18)","decl":{"start":{"line":56,"column":4},"end":{"line":56,"column":5}},"loc":{"start":{"line":56,"column":20},"end":{"line":63,"column":5}},"line":56},"19":{"name":"(anonymous_19)","decl":{"start":{"line":57,"column":47},"end":{"line":57,"column":48}},"loc":{"start":{"line":57,"column":60},"end":{"line":62,"column":9}},"line":57},"20":{"name":"(anonymous_20)","decl":{"start":{"line":64,"column":4},"end":{"line":64,"column":5}},"loc":{"start":{"line":64,"column":29},"end":{"line":68,"column":5}},"line":64},"21":{"name":"(anonymous_21)","decl":{"start":{"line":65,"column":47},"end":{"line":65,"column":48}},"loc":{"start":{"line":65,"column":60},"end":{"line":67,"column":9}},"line":65},"22":{"name":"(anonymous_22)","decl":{"start":{"line":69,"column":4},"end":{"line":69,"column":5}},"loc":{"start":{"line":69,"column":18},"end":{"line":74,"column":5}},"line":69},"23":{"name":"(anonymous_23)","decl":{"start":{"line":71,"column":47},"end":{"line":71,"column":48}},"loc":{"start":{"line":71,"column":60},"end":{"line":73,"column":9}},"line":71},"24":{"name":"(anonymous_24)","decl":{"start":{"line":75,"column":4},"end":{"line":75,"column":5}},"loc":{"start":{"line":75,"column":27},"end":{"line":79,"column":5}},"line":75},"25":{"name":"(anonymous_25)","decl":{"start":{"line":76,"column":47},"end":{"line":76,"column":48}},"loc":{"start":{"line":76,"column":60},"end":{"line":78,"column":9}},"line":76},"26":{"name":"(anonymous_26)","decl":{"start":{"line":80,"column":4},"end":{"line":80,"column":5}},"loc":{"start":{"line":80,"column":36},"end":{"line":84,"column":5}},"line":80},"27":{"name":"(anonymous_27)","decl":{"start":{"line":81,"column":47},"end":{"line":81,"column":48}},"loc":{"start":{"line":81,"column":60},"end":{"line":83,"column":9}},"line":81}},"branchMap":{"0":{"loc":{"start":{"line":1,"column":17},"end":{"line":6,"column":1}},"type":"binary-expr","locations":[{"start":{"line":1,"column":18},"end":{"line":1,"column":22}},{"start":{"line":1,"column":26},"end":{"line":1,"column":41}},{"start":{"line":1,"column":46},"end":{"line":6,"column":1}}],"line":1},"1":{"loc":{"start":{"line":2,"column":34},"end":{"line":2,"column":125}},"type":"cond-expr","locations":[{"start":{"line":2,"column":42},"end":{"line":2,"column":48}},{"start":{"line":2,"column":51},"end":{"line":2,"column":125}}],"line":2},"2":{"loc":{"start":{"line":2,"column":51},"end":{"line":2,"column":125}},"type":"cond-expr","locations":[{"start":{"line":2,"column":67},"end":{"line":2,"column":118}},{"start":{"line":2,"column":121},"end":{"line":2,"column":125}}],"line":2},"3":{"loc":{"start":{"line":3,"column":4},"end":{"line":4,"column":150}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":4,"column":150}},{"start":{"line":3,"column":4},"end":{"line":4,"column":150}}],"line":3},"4":{"loc":{"start":{"line":3,"column":8},"end":{"line":3,"column":77}},"type":"binary-expr","locations":[{"start":{"line":3,"column":8},"end":{"line":3,"column":35}},{"start":{"line":3,"column":39},"end":{"line":3,"column":77}}],"line":3},"5":{"loc":{"start":{"line":4,"column":58},"end":{"line":4,"column":150}},"type":"if","locations":[{"start":{"line":4,"column":58},"end":{"line":4,"column":150}},{"start":{"line":4,"column":58},"end":{"line":4,"column":150}}],"line":4},"6":{"loc":{"start":{"line":4,"column":85},"end":{"line":4,"column":149}},"type":"binary-expr","locations":[{"start":{"line":4,"column":86},"end":{"line":4,"column":143}},{"start":{"line":4,"column":148},"end":{"line":4,"column":149}}],"line":4},"7":{"loc":{"start":{"line":4,"column":86},"end":{"line":4,"column":143}},"type":"cond-expr","locations":[{"start":{"line":4,"column":94},"end":{"line":4,"column":98}},{"start":{"line":4,"column":101},"end":{"line":4,"column":143}}],"line":4},"8":{"loc":{"start":{"line":4,"column":101},"end":{"line":4,"column":143}},"type":"cond-expr","locations":[{"start":{"line":4,"column":109},"end":{"line":4,"column":126}},{"start":{"line":4,"column":129},"end":{"line":4,"column":143}}],"line":4},"9":{"loc":{"start":{"line":5,"column":11},"end":{"line":5,"column":62}},"type":"binary-expr","locations":[{"start":{"line":5,"column":11},"end":{"line":5,"column":16}},{"start":{"line":5,"column":20},"end":{"line":5,"column":21}},{"start":{"line":5,"column":25},"end":{"line":5,"column":62}}],"line":5},"10":{"loc":{"start":{"line":7,"column":17},"end":{"line":9,"column":1}},"type":"binary-expr","locations":[{"start":{"line":7,"column":18},"end":{"line":7,"column":22}},{"start":{"line":7,"column":26},"end":{"line":7,"column":41}},{"start":{"line":7,"column":46},"end":{"line":9,"column":1}}],"line":7},"11":{"loc":{"start":{"line":8,"column":4},"end":{"line":8,"column":109}},"type":"if","locations":[{"start":{"line":8,"column":4},"end":{"line":8,"column":109}},{"start":{"line":8,"column":4},"end":{"line":8,"column":109}}],"line":8},"12":{"loc":{"start":{"line":8,"column":8},"end":{"line":8,"column":77}},"type":"binary-expr","locations":[{"start":{"line":8,"column":8},"end":{"line":8,"column":35}},{"start":{"line":8,"column":39},"end":{"line":8,"column":77}}],"line":8},"13":{"loc":{"start":{"line":10,"column":14},"end":{"line":12,"column":1}},"type":"binary-expr","locations":[{"start":{"line":10,"column":15},"end":{"line":10,"column":19}},{"start":{"line":10,"column":23},"end":{"line":10,"column":35}},{"start":{"line":10,"column":40},"end":{"line":12,"column":1}}],"line":10},"14":{"loc":{"start":{"line":13,"column":16},"end":{"line":20,"column":1}},"type":"binary-expr","locations":[{"start":{"line":13,"column":17},"end":{"line":13,"column":21}},{"start":{"line":13,"column":25},"end":{"line":13,"column":39}},{"start":{"line":13,"column":44},"end":{"line":20,"column":1}}],"line":13},"15":{"loc":{"start":{"line":14,"column":16},"end":{"line":14,"column":34}},"type":"binary-expr","locations":[{"start":{"line":14,"column":16},"end":{"line":14,"column":17}},{"start":{"line":14,"column":22},"end":{"line":14,"column":33}}],"line":14},"16":{"loc":{"start":{"line":17,"column":32},"end":{"line":17,"column":148}},"type":"cond-expr","locations":[{"start":{"line":17,"column":46},"end":{"line":17,"column":67}},{"start":{"line":17,"column":70},"end":{"line":17,"column":148}}],"line":17},"17":{"loc":{"start":{"line":18,"column":51},"end":{"line":18,"column":67}},"type":"binary-expr","locations":[{"start":{"line":18,"column":51},"end":{"line":18,"column":61}},{"start":{"line":18,"column":65},"end":{"line":18,"column":67}}],"line":18},"18":{"loc":{"start":{"line":21,"column":13},"end":{"line":29,"column":1}},"type":"binary-expr","locations":[{"start":{"line":21,"column":14},"end":{"line":21,"column":18}},{"start":{"line":21,"column":22},"end":{"line":21,"column":33}},{"start":{"line":21,"column":38},"end":{"line":29,"column":1}}],"line":21},"19":{"loc":{"start":{"line":23,"column":21},"end":{"line":24,"column":20}},"type":"if","locations":[{"start":{"line":23,"column":21},"end":{"line":24,"column":20}},{"start":{"line":23,"column":21},"end":{"line":24,"column":20}}],"line":23},"20":{"loc":{"start":{"line":23,"column":25},"end":{"line":23,"column":87}},"type":"binary-expr","locations":[{"start":{"line":23,"column":25},"end":{"line":23,"column":67}},{"start":{"line":23,"column":71},"end":{"line":23,"column":87}}],"line":23},"21":{"loc":{"start":{"line":25,"column":4},"end":{"line":27,"column":30}},"type":"if","locations":[{"start":{"line":25,"column":4},"end":{"line":27,"column":30}},{"start":{"line":25,"column":4},"end":{"line":27,"column":30}}],"line":25},"22":{"loc":{"start":{"line":25,"column":8},"end":{"line":25,"column":71}},"type":"binary-expr","locations":[{"start":{"line":25,"column":8},"end":{"line":25,"column":17}},{"start":{"line":25,"column":21},"end":{"line":25,"column":71}}],"line":25},"23":{"loc":{"start":{"line":26,"column":80},"end":{"line":27,"column":30}},"type":"if","locations":[{"start":{"line":26,"column":80},"end":{"line":27,"column":30}},{"start":{"line":26,"column":80},"end":{"line":27,"column":30}}],"line":26},"24":{"loc":{"start":{"line":89,"column":37},"end":{"line":89,"column":145}},"type":"binary-expr","locations":[{"start":{"line":89,"column":37},"end":{"line":89,"column":129}},{"start":{"line":89,"column":133},"end":{"line":89,"column":135}},{"start":{"line":89,"column":139},"end":{"line":89,"column":145}}],"line":89},"25":{"loc":{"start":{"line":89,"column":50},"end":{"line":89,"column":113}},"type":"binary-expr","locations":[{"start":{"line":89,"column":50},"end":{"line":89,"column":91}},{"start":{"line":89,"column":95},"end":{"line":89,"column":113}}],"line":89}},"s":{"0":3,"1":3,"2":3,"3":3,"4":3,"5":0,"6":0,"7":0,"8":3,"9":3,"10":3,"11":3,"12":3,"13":3,"14":3,"15":3,"16":14,"17":3,"18":3,"19":0,"20":0,"21":0,"22":0,"23":17,"24":3,"25":14,"26":3,"27":2,"28":2,"29":6,"30":2,"31":2,"32":2,"33":0,"34":0,"35":2,"36":3,"37":14,"38":14,"39":2,"40":2,"41":3,"42":3,"43":2,"44":2,"45":1,"46":1,"47":1,"48":1,"49":1,"50":1,"51":1,"52":2,"53":2,"54":2,"55":2,"56":1,"57":1,"58":2,"59":2,"60":3},"f":{"0":3,"1":3,"2":3,"3":3,"4":14,"5":14,"6":3,"7":0,"8":17,"9":3,"10":2,"11":14,"12":2,"13":2,"14":3,"15":3,"16":2,"17":2,"18":1,"19":1,"20":1,"21":1,"22":2,"23":2,"24":1,"25":1,"26":2,"27":2},"b":{"0":[3,0,3],"1":[3,0],"2":[0,0],"3":[3,0],"4":[3,3],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[3,0,0],"10":[3,0,3],"11":[3,0],"12":[3,3],"13":[3,0,3],"14":[3,0,3],"15":[14,14],"16":[14,3],"17":[14,14],"18":[3,0,3],"19":[2,4],"20":[6,6],"21":[2,0],"22":[2,2],"23":[0,0],"24":[3,3,0],"25":[3,3]},"inputSourceMap":{"version":3,"file":"projects.service.js","sourceRoot":"","sources":["projects.service.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAO,EAAE,gBAAgB,EAAE,MAAM,iBAAiB,CAAC;AACnD,OAAO,KAAK,GAAG,MAAM,KAAK,CAAC;AAC3B,OAAO,EAAC,OAAO,EAAC,MAAM,kBAAkB,CAAC;AACzC,OAAO,EAAC,kBAAkB,EAAC,MAAM,uBAAuB,CAAC;AAEzD,OAAO,EAAE,UAAU,EAAE,MAAM,gBAAgB,CAAC;AAG5C,IAAa,eAAe,GAA5B;IAII,YAEmB,kBAAsC;QAAtC,uBAAkB,GAAlB,kBAAkB,CAAoB;QAJxC,oBAAe,GAAG,GAAG,CAAC;IAKpC,CAAC;IAEE,cAAc,CAAC,MAAc;;YAC/B,OAAO,IAAI,CAAC,kBAAkB,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC;QAC1D,CAAC;KAAA;IAEK,QAAQ,CAAC,EAAU;;YACrB,OAAO,IAAI,CAAC,kBAAkB,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;QAChD,CAAC;KAAA;IAEK,eAAe,CAAC,EAAU,EAAE,MAAc;;YAC5C,OAAO,IAAI,CAAC,kBAAkB,CAAC,eAAe,CAAC,EAAE,EAAE,MAAM,CAAC,CAAC;QAC/D,CAAC;KAAA;IAEK,SAAS,CAAC,IAAsB;;YAClC,MAAM,OAAO,GAAG,IAAI,OAAO,mBAAM,IAAI,EAAG,CAAC;YACzC,OAAO,CAAC,QAAQ,GAAG,IAAI,CAAC,eAAe,CAAC,EAAE,CAAC,CAAC;YAC5C,OAAO,CAAC,YAAY,GAAG,IAAI,CAAC,eAAe,CAAC,EAAE,CAAC,CAAC;YAEhD,OAAO,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QACjD,CAAC;KAAA;IAUK,mBAAmB,CAAC,GAA+B;;YACrD,OAAO,IAAI,CAAC,kBAAkB,CAAC,mBAAmB,CAAC,GAAG,CAAC,QAAQ,EAAE,GAAG,CAAC,YAAY,CAAC,CAAC;QACvF,CAAC;KAAA;IAEK,SAAS,CAAC,EAAyC;YAAzC,EAAE,EAAE,EAAE,MAAM,OAA6B,EAA3B,mCAAO;;YACjC,OAAO,IAAI,CAAC,kBAAkB,CAAC,gBAAgB,CAAC,EAAE,oBAAO,IAAI,EAAG,CAAC;;KACpE;IAEK,UAAU,CAAC,EAAU,EAAE,MAAc;;YACvC,MAAM,IAAI,CAAC,kBAAkB,CAAC,UAAU,CAAC,EAAE,EAAE,MAAM,CAAC,CAAC;QACzD,CAAC;KAAA;IAEK,YAAY,CAAC,SAAiB,EAAE,MAAc;;YAChD,OAAO,CAAC,CAAC,CAAC,MAAM,IAAI,CAAC,kBAAkB,CAAC,eAAe,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC,CAAC;QAChF,CAAC;KAAA;CAEJ,CAAA;AArDY,eAAe;IAD3B,UAAU,EAAE;IAMN,WAAA,gBAAgB,CAAC,kBAAkB,CAAC,CAAA;yDACA,kBAAkB,oBAAlB,kBAAkB;GANhD,eAAe,CAqD3B;SArDY,eAAe","sourcesContent":["import { InjectRepository } from '@nestjs/typeorm';\nimport * as uid from 'uid';\nimport {Project} from './project.entity';\nimport {ProjectsRepository} from './projects.repository';\nimport {CreateProjectDto, FindProjectByClientInfoDto, FindProjectDto, UpdateProjectDto} from '@bit/alan18081.astra-storage.common.dist/dto';\nimport { Injectable } from '@nestjs/common';\n\n@Injectable()\nexport class ProjectsService {\n\n    private readonly randomGenerator = uid;\n\n    constructor(\n      @InjectRepository(ProjectsRepository)\n      private readonly projectsRepository: ProjectsRepository,\n    ) {}\n\n    async findManyByUser(userId: number): Promise<Project[]> {\n        return this.projectsRepository.findManyByUser(userId);\n    }\n\n    async findById(id: number): Promise<Project | undefined> {\n        return this.projectsRepository.findById(id);\n    }\n\n    async findOneByUserId(id: number, userId: number): Promise<Project | undefined> {\n        return this.projectsRepository.findOneByUserId(id, userId);\n    }\n\n    async createOne(body: CreateProjectDto): Promise<Project> {\n        const project = new Project({ ...body });\n        project.clientId = this.randomGenerator(10);\n        project.clientSecret = this.randomGenerator(15);\n\n        return this.projectsRepository.save(project);\n    }\n\n    // async incrementStoragesCount(id: number): Promise<void> {\n    //     return this.projectsRepository.incrementStoragesCount(id);\n    // }\n    //\n    // async decrementStoragesCount(id: number): Promise<void> {\n    //     return this.decrementStoragesCount(id);\n    // }\n\n    async findOneByClientInfo(dto: FindProjectByClientInfoDto): Promise<Project | undefined> {\n        return this.projectsRepository.findOneByClientInfo(dto.clientId, dto.clientSecret);\n    }\n\n    async updateOne({ id, userId, ...data }: UpdateProjectDto): Promise<Project | undefined> {\n        return this.projectsRepository.updateOneAndFind(id, { ...data });\n    }\n\n    async removeById(id: number, userId: number): Promise<void> {\n        await this.projectsRepository.removeById(id, userId);\n    }\n\n    async isValidOwner(projectId: number, userId: number): Promise<boolean> {\n        return !!(await this.projectsRepository.findOneByUserId(projectId, userId));\n    }\n\n}"]},"_coverageSchema":"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c","hash":"1960e4160ae9d49af9d1a6273c905c47d657c57c"}
,"/home/alex/PhpstormProjects/astra-storage/ProjectsService/src/components/projects/tests/mocks.ts": {"path":"/home/alex/PhpstormProjects/astra-storage/ProjectsService/src/components/projects/tests/mocks.ts","statementMap":{"0":{"start":{"line":2,"column":27},"end":{"line":11,"column":1}},"1":{"start":{"line":12,"column":28},"end":{"line":12,"column":62}},"2":{"start":{"line":13,"column":38},"end":{"line":23,"column":1}},"3":{"start":{"line":24,"column":31},"end":{"line":27,"column":1}},"4":{"start":{"line":28,"column":32},"end":{"line":32,"column":1}},"5":{"start":{"line":30,"column":8},"end":{"line":30,"column":35}}},"fnMap":{},"branchMap":{},"s":{"0":4,"1":4,"2":4,"3":4,"4":4,"5":0},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"mocks.js","sourceRoot":"","sources":["mocks.ts"],"names":[],"mappings":"AAAA,OAAO,EAAC,OAAO,EAAC,MAAM,mBAAmB,CAAC;AAE1C,MAAM,CAAC,MAAM,WAAW,GAAG;IACvB,EAAE,EAAE,EAAE;IACN,IAAI,EAAE,YAAY;IAClB,WAAW,EAAE,2BAA2B;IACxC,QAAQ,EAAE,iBAAiB;IAC3B,YAAY,EAAE,iBAAiB;IAC/B,aAAa,EAAE,CAAC;IAChB,MAAM,EAAE,CAAC;IACT,SAAS,EAAE,IAAI,IAAI,EAAE;CACxB,CAAC;AAEF,MAAM,CAAC,MAAM,YAAY,GAAG,CAAC,IAAI,OAAO,CAAC,EAAE,CAAC,EAAE,IAAI,OAAO,CAAC,EAAE,CAAC,CAAC,CAAC;AAE/D,MAAM,CAAC,MAAM,sBAAsB,GAAG;IAClC,QAAQ,KAAI,CAAC;IACb,eAAe,KAAI,CAAC;IACpB,IAAI,KAAI,CAAC;IACT,gBAAgB,KAAI,CAAC;IACrB,SAAS,KAAI,CAAC;IACd,UAAU,KAAI,CAAC;IACf,mBAAmB,KAAI,CAAC;IACxB,cAAc,KAAI,CAAC;IACnB,qBAAqB,KAAI,CAAC;CAC7B,CAAC;AAEF,MAAM,CAAC,MAAM,eAAe,GAAG;IAC7B,YAAY,KAAI,CAAC;IACjB,WAAW,KAAI,CAAC;CACjB,CAAC;AAEF,MAAM,CAAC,MAAM,gBAAgB,GAAG;IAC9B,IAAI;QACA,OAAO,EAAE,SAAS,KAAI,CAAC,EAAE,CAAA;IAC7B,CAAC;CACF,CAAC","sourcesContent":["import {Project} from '../project.entity';\n\nexport const mockProject = {\n    id: 20,\n    name: 'My project',\n    description: 'Description of my project',\n    clientId: 'some random str',\n    clientSecret: 'some random str',\n    storagesCount: 0,\n    userId: 5,\n    createdAt: new Date(),\n};\n\nexport const mockProjects = [new Project({}), new Project({})];\n\nexport const mockProjectsRepository = {\n    findById() {},\n    findOneByUserId() {},\n    save() {},\n    updateOneAndFind() {},\n    updateOne() {},\n    removeById() {},\n    findOneByClientInfo() {},\n    findManyByUser() {},\n    incrementStorageCount() {},\n};\n\nexport const mockHashService = {\n  generateHash() {},\n  compareHash() {},\n};\n\nexport const mockEmailsClient = {\n  send() {\n      return { toPromise() {} }\n  }\n};\n"]},"_coverageSchema":"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c","hash":"f3e06669f427a3057c548962a48878099b12a454"}
,"/home/alex/PhpstormProjects/astra-storage/ProjectsService/src/components/storages/storage.entity.ts": {"path":"/home/alex/PhpstormProjects/astra-storage/ProjectsService/src/components/storages/storage.entity.ts","statementMap":{"0":{"start":{"line":1,"column":17},"end":{"line":6,"column":1}},"1":{"start":{"line":2,"column":12},"end":{"line":2,"column":28}},"2":{"start":{"line":2,"column":34},"end":{"line":2,"column":125}},"3":{"start":{"line":3,"column":4},"end":{"line":4,"column":150}},"4":{"start":{"line":3,"column":79},"end":{"line":3,"column":131}},"5":{"start":{"line":4,"column":9},"end":{"line":4,"column":150}},"6":{"start":{"line":4,"column":58},"end":{"line":4,"column":150}},"7":{"start":{"line":4,"column":81},"end":{"line":4,"column":150}},"8":{"start":{"line":5,"column":4},"end":{"line":5,"column":66}},"9":{"start":{"line":7,"column":17},"end":{"line":9,"column":1}},"10":{"start":{"line":8,"column":4},"end":{"line":8,"column":109}},"11":{"start":{"line":8,"column":79},"end":{"line":8,"column":109}},"12":{"start":{"line":14,"column":14},"end":{"line":19,"column":1}},"13":{"start":{"line":16,"column":8},"end":{"line":16,"column":16}},"14":{"start":{"line":17,"column":8},"end":{"line":17,"column":37}},"15":{"start":{"line":20,"column":0},"end":{"line":23,"column":36}},"16":{"start":{"line":24,"column":0},"end":{"line":27,"column":38}},"17":{"start":{"line":28,"column":0},"end":{"line":31,"column":45}},"18":{"start":{"line":32,"column":0},"end":{"line":36,"column":38}},"19":{"start":{"line":37,"column":0},"end":{"line":40,"column":43}},"20":{"start":{"line":41,"column":0},"end":{"line":45,"column":41}},"21":{"start":{"line":42,"column":22},"end":{"line":42,"column":29}},"22":{"start":{"line":42,"column":42},"end":{"line":42,"column":58}},"23":{"start":{"line":46,"column":0},"end":{"line":49,"column":40}},"24":{"start":{"line":50,"column":0},"end":{"line":53,"column":12}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":1,"column":46},"end":{"line":1,"column":47}},"loc":{"start":{"line":1,"column":87},"end":{"line":6,"column":1}},"line":1},"1":{"name":"(anonymous_1)","decl":{"start":{"line":7,"column":46},"end":{"line":7,"column":47}},"loc":{"start":{"line":7,"column":62},"end":{"line":9,"column":1}},"line":7},"2":{"name":"(anonymous_2)","decl":{"start":{"line":15,"column":4},"end":{"line":15,"column":5}},"loc":{"start":{"line":15,"column":25},"end":{"line":18,"column":5}},"line":15},"3":{"name":"(anonymous_3)","decl":{"start":{"line":42,"column":14},"end":{"line":42,"column":15}},"loc":{"start":{"line":42,"column":22},"end":{"line":42,"column":29}},"line":42},"4":{"name":"(anonymous_4)","decl":{"start":{"line":42,"column":31},"end":{"line":42,"column":32}},"loc":{"start":{"line":42,"column":42},"end":{"line":42,"column":58}},"line":42}},"branchMap":{"0":{"loc":{"start":{"line":1,"column":17},"end":{"line":6,"column":1}},"type":"binary-expr","locations":[{"start":{"line":1,"column":18},"end":{"line":1,"column":22}},{"start":{"line":1,"column":26},"end":{"line":1,"column":41}},{"start":{"line":1,"column":46},"end":{"line":6,"column":1}}],"line":1},"1":{"loc":{"start":{"line":2,"column":34},"end":{"line":2,"column":125}},"type":"cond-expr","locations":[{"start":{"line":2,"column":42},"end":{"line":2,"column":48}},{"start":{"line":2,"column":51},"end":{"line":2,"column":125}}],"line":2},"2":{"loc":{"start":{"line":2,"column":51},"end":{"line":2,"column":125}},"type":"cond-expr","locations":[{"start":{"line":2,"column":67},"end":{"line":2,"column":118}},{"start":{"line":2,"column":121},"end":{"line":2,"column":125}}],"line":2},"3":{"loc":{"start":{"line":3,"column":4},"end":{"line":4,"column":150}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":4,"column":150}},{"start":{"line":3,"column":4},"end":{"line":4,"column":150}}],"line":3},"4":{"loc":{"start":{"line":3,"column":8},"end":{"line":3,"column":77}},"type":"binary-expr","locations":[{"start":{"line":3,"column":8},"end":{"line":3,"column":35}},{"start":{"line":3,"column":39},"end":{"line":3,"column":77}}],"line":3},"5":{"loc":{"start":{"line":4,"column":58},"end":{"line":4,"column":150}},"type":"if","locations":[{"start":{"line":4,"column":58},"end":{"line":4,"column":150}},{"start":{"line":4,"column":58},"end":{"line":4,"column":150}}],"line":4},"6":{"loc":{"start":{"line":4,"column":85},"end":{"line":4,"column":149}},"type":"binary-expr","locations":[{"start":{"line":4,"column":86},"end":{"line":4,"column":143}},{"start":{"line":4,"column":148},"end":{"line":4,"column":149}}],"line":4},"7":{"loc":{"start":{"line":4,"column":86},"end":{"line":4,"column":143}},"type":"cond-expr","locations":[{"start":{"line":4,"column":94},"end":{"line":4,"column":98}},{"start":{"line":4,"column":101},"end":{"line":4,"column":143}}],"line":4},"8":{"loc":{"start":{"line":4,"column":101},"end":{"line":4,"column":143}},"type":"cond-expr","locations":[{"start":{"line":4,"column":109},"end":{"line":4,"column":126}},{"start":{"line":4,"column":129},"end":{"line":4,"column":143}}],"line":4},"9":{"loc":{"start":{"line":5,"column":11},"end":{"line":5,"column":62}},"type":"binary-expr","locations":[{"start":{"line":5,"column":11},"end":{"line":5,"column":16}},{"start":{"line":5,"column":20},"end":{"line":5,"column":21}},{"start":{"line":5,"column":25},"end":{"line":5,"column":62}}],"line":5},"10":{"loc":{"start":{"line":7,"column":17},"end":{"line":9,"column":1}},"type":"binary-expr","locations":[{"start":{"line":7,"column":18},"end":{"line":7,"column":22}},{"start":{"line":7,"column":26},"end":{"line":7,"column":41}},{"start":{"line":7,"column":46},"end":{"line":9,"column":1}}],"line":7},"11":{"loc":{"start":{"line":8,"column":4},"end":{"line":8,"column":109}},"type":"if","locations":[{"start":{"line":8,"column":4},"end":{"line":8,"column":109}},{"start":{"line":8,"column":4},"end":{"line":8,"column":109}}],"line":8},"12":{"loc":{"start":{"line":8,"column":8},"end":{"line":8,"column":77}},"type":"binary-expr","locations":[{"start":{"line":8,"column":8},"end":{"line":8,"column":35}},{"start":{"line":8,"column":39},"end":{"line":8,"column":77}}],"line":8},"13":{"loc":{"start":{"line":44,"column":30},"end":{"line":44,"column":116}},"type":"binary-expr","locations":[{"start":{"line":44,"column":30},"end":{"line":44,"column":100}},{"start":{"line":44,"column":104},"end":{"line":44,"column":106}},{"start":{"line":44,"column":110},"end":{"line":44,"column":116}}],"line":44},"14":{"loc":{"start":{"line":44,"column":43},"end":{"line":44,"column":84}},"type":"binary-expr","locations":[{"start":{"line":44,"column":43},"end":{"line":44,"column":73}},{"start":{"line":44,"column":77},"end":{"line":44,"column":84}}],"line":44},"15":{"loc":{"start":{"line":48,"column":30},"end":{"line":48,"column":124}},"type":"binary-expr","locations":[{"start":{"line":48,"column":30},"end":{"line":48,"column":108}},{"start":{"line":48,"column":112},"end":{"line":48,"column":114}},{"start":{"line":48,"column":118},"end":{"line":48,"column":124}}],"line":48},"16":{"loc":{"start":{"line":48,"column":43},"end":{"line":48,"column":92}},"type":"binary-expr","locations":[{"start":{"line":48,"column":43},"end":{"line":48,"column":77}},{"start":{"line":48,"column":81},"end":{"line":48,"column":92}}],"line":48},"17":{"loc":{"start":{"line":52,"column":37},"end":{"line":52,"column":123}},"type":"binary-expr","locations":[{"start":{"line":52,"column":37},"end":{"line":52,"column":107}},{"start":{"line":52,"column":111},"end":{"line":52,"column":113}},{"start":{"line":52,"column":117},"end":{"line":52,"column":123}}],"line":52},"18":{"loc":{"start":{"line":52,"column":50},"end":{"line":52,"column":91}},"type":"binary-expr","locations":[{"start":{"line":52,"column":50},"end":{"line":52,"column":80}},{"start":{"line":52,"column":84},"end":{"line":52,"column":91}}],"line":52}},"s":{"0":5,"1":40,"2":40,"3":40,"4":40,"5":0,"6":0,"7":0,"8":40,"9":5,"10":40,"11":40,"12":5,"13":8,"14":8,"15":5,"16":5,"17":5,"18":5,"19":5,"20":5,"21":0,"22":0,"23":5,"24":5},"f":{"0":40,"1":40,"2":8,"3":0,"4":0},"b":{"0":[5,0,5],"1":[5,35],"2":[0,35],"3":[40,0],"4":[40,40],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[40,35,0],"10":[5,0,5],"11":[40,0],"12":[40,40],"13":[5,2,3],"14":[5,2],"15":[5,0,5],"16":[5,5],"17":[5,0,5],"18":[5,0]},"inputSourceMap":{"version":3,"file":"storage.entity.js","sourceRoot":"","sources":["storage.entity.ts"],"names":[],"mappings":";;;;;;;;;;AAAA,OAAO,EAAE,UAAU,EAAY,WAAW,EAAE,MAAM,eAAe,CAAC;AAElE,OAAO,EAAC,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE,UAAU,EAAE,SAAS,EAAE,sBAAsB,EAAC,MAAM,SAAS,CAAC;AAC7F,OAAO,EAAE,OAAO,EAAE,MAAM,4BAA4B,CAAC;AAGrD,IAAa,OAAO,GAApB,aAAqB,SAAQ,UAAU;IAyBrC,YAAY,OAAyB;QACnC,KAAK,EAAE,CAAC;QACR,MAAM,CAAC,MAAM,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;IAC/B,CAAC;CACF,CAAA;AA1BC;IADC,sBAAsB,EAAE;;mCACd;AAGX;IADC,MAAM,CAAC,SAAS,CAAC;;qCACL;AAGb;IADC,MAAM,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,EAAE,EAAE,CAAC;;4CACjB;AAIrB;IAFC,MAAM,CAAC,SAAS,CAAC;IACjB,KAAK,EAAE;;qCACK;AAGb;IADC,MAAM,EAAE;;0CACS;AAIlB;IAFC,SAAS,CAAC,IAAI,CAAC,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC,EAAE,CAAC,OAAO,CAAC,QAAQ,CAAC;IACvD,UAAU,CAAC,EAAE,IAAI,EAAE,WAAW,EAAE,CAAC;kDACzB,OAAO,oBAAP,OAAO;wCAAC;AAGjB;IADC,MAAM,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,WAAW,CAAC,IAAI,EAAE,CAAC;kDAC3C,WAAW,oBAAX,WAAW;uCAAC;AAvBT,OAAO;IADnB,MAAM,EAAE;yDA0Bc,OAAO,oBAAP,OAAO;GAzBjB,OAAO,CA6BnB;SA7BY,OAAO","sourcesContent":["import { BaseEntity, IStorage, StorageType } from '@bit/alan18081.astra-storage.common.dist';\nimport { toNumber, toString } from 'lodash';\nimport {Column, Entity, Index, JoinColumn, ManyToOne, PrimaryGeneratedColumn} from 'typeorm';\nimport { Project } from '../projects/project.entity';\n\n@Entity()\nexport class Storage extends BaseEntity implements IStorage {\n\n  @PrimaryGeneratedColumn()\n  id: number;\n\n  @Column('varchar')\n  name: string;\n\n  @Column({ type: 'text', default: '' })\n  description?: string;\n\n  @Column('varchar')\n  @Index()\n  path: string;\n\n  @Column()\n  projectId: number;\n\n  @ManyToOne(type => Project, project => project.storages)\n  @JoinColumn({ name: 'projectId' })\n  project: Project;\n\n  @Column({ type: 'int', default: StorageType.FREE })\n  typeId: StorageType;\n\n  constructor(partial: Partial<Storage>) {\n    super();\n    Object.assign(this, partial);\n  }\n}"]},"_coverageSchema":"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c","hash":"449affe41b1561dea09c2a9bb9fc60d66178fb04"}
,"/home/alex/PhpstormProjects/astra-storage/ProjectsService/src/components/storages/storages.repository.ts": {"path":"/home/alex/PhpstormProjects/astra-storage/ProjectsService/src/components/storages/storages.repository.ts","statementMap":{"0":{"start":{"line":1,"column":17},"end":{"line":6,"column":1}},"1":{"start":{"line":2,"column":12},"end":{"line":2,"column":28}},"2":{"start":{"line":2,"column":34},"end":{"line":2,"column":125}},"3":{"start":{"line":3,"column":4},"end":{"line":4,"column":150}},"4":{"start":{"line":3,"column":79},"end":{"line":3,"column":131}},"5":{"start":{"line":4,"column":9},"end":{"line":4,"column":150}},"6":{"start":{"line":4,"column":58},"end":{"line":4,"column":150}},"7":{"start":{"line":4,"column":81},"end":{"line":4,"column":150}},"8":{"start":{"line":5,"column":4},"end":{"line":5,"column":66}},"9":{"start":{"line":7,"column":17},"end":{"line":9,"column":1}},"10":{"start":{"line":8,"column":4},"end":{"line":8,"column":109}},"11":{"start":{"line":8,"column":79},"end":{"line":8,"column":109}},"12":{"start":{"line":10,"column":14},"end":{"line":12,"column":1}},"13":{"start":{"line":11,"column":4},"end":{"line":11,"column":73}},"14":{"start":{"line":11,"column":36},"end":{"line":11,"column":71}},"15":{"start":{"line":13,"column":16},"end":{"line":20,"column":1}},"16":{"start":{"line":14,"column":4},"end":{"line":19,"column":7}},"17":{"start":{"line":15,"column":36},"end":{"line":15,"column":97}},"18":{"start":{"line":15,"column":42},"end":{"line":15,"column":70}},"19":{"start":{"line":15,"column":85},"end":{"line":15,"column":95}},"20":{"start":{"line":16,"column":35},"end":{"line":16,"column":100}},"21":{"start":{"line":16,"column":41},"end":{"line":16,"column":73}},"22":{"start":{"line":16,"column":88},"end":{"line":16,"column":98}},"23":{"start":{"line":17,"column":32},"end":{"line":17,"column":149}},"24":{"start":{"line":17,"column":97},"end":{"line":17,"column":119}},"25":{"start":{"line":18,"column":8},"end":{"line":18,"column":78}},"26":{"start":{"line":26,"column":25},"end":{"line":59,"column":1}},"27":{"start":{"line":28,"column":8},"end":{"line":30,"column":11}},"28":{"start":{"line":29,"column":12},"end":{"line":29,"column":40}},"29":{"start":{"line":33,"column":8},"end":{"line":35,"column":11}},"30":{"start":{"line":34,"column":12},"end":{"line":34,"column":44}},"31":{"start":{"line":38,"column":8},"end":{"line":40,"column":11}},"32":{"start":{"line":39,"column":12},"end":{"line":39,"column":42}},"33":{"start":{"line":43,"column":8},"end":{"line":46,"column":11}},"34":{"start":{"line":44,"column":12},"end":{"line":44,"column":63}},"35":{"start":{"line":45,"column":12},"end":{"line":45,"column":37}},"36":{"start":{"line":49,"column":8},"end":{"line":51,"column":11}},"37":{"start":{"line":50,"column":12},"end":{"line":50,"column":38}},"38":{"start":{"line":54,"column":8},"end":{"line":57,"column":11}},"39":{"start":{"line":55,"column":12},"end":{"line":55,"column":71}},"40":{"start":{"line":56,"column":12},"end":{"line":56,"column":38}},"41":{"start":{"line":60,"column":0},"end":{"line":67,"column":52}},"42":{"start":{"line":68,"column":0},"end":{"line":70,"column":23}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":1,"column":46},"end":{"line":1,"column":47}},"loc":{"start":{"line":1,"column":87},"end":{"line":6,"column":1}},"line":1},"1":{"name":"(anonymous_1)","decl":{"start":{"line":7,"column":46},"end":{"line":7,"column":47}},"loc":{"start":{"line":7,"column":62},"end":{"line":9,"column":1}},"line":7},"2":{"name":"(anonymous_2)","decl":{"start":{"line":10,"column":40},"end":{"line":10,"column":41}},"loc":{"start":{"line":10,"column":73},"end":{"line":12,"column":1}},"line":10},"3":{"name":"(anonymous_3)","decl":{"start":{"line":11,"column":11},"end":{"line":11,"column":12}},"loc":{"start":{"line":11,"column":34},"end":{"line":11,"column":73}},"line":11},"4":{"name":"(anonymous_4)","decl":{"start":{"line":13,"column":44},"end":{"line":13,"column":45}},"loc":{"start":{"line":13,"column":89},"end":{"line":20,"column":1}},"line":13},"5":{"name":"(anonymous_5)","decl":{"start":{"line":14,"column":36},"end":{"line":14,"column":37}},"loc":{"start":{"line":14,"column":63},"end":{"line":19,"column":5}},"line":14},"6":{"name":"fulfilled","decl":{"start":{"line":15,"column":17},"end":{"line":15,"column":26}},"loc":{"start":{"line":15,"column":34},"end":{"line":15,"column":99}},"line":15},"7":{"name":"rejected","decl":{"start":{"line":16,"column":17},"end":{"line":16,"column":25}},"loc":{"start":{"line":16,"column":33},"end":{"line":16,"column":102}},"line":16},"8":{"name":"step","decl":{"start":{"line":17,"column":17},"end":{"line":17,"column":21}},"loc":{"start":{"line":17,"column":30},"end":{"line":17,"column":151}},"line":17},"9":{"name":"(anonymous_9)","decl":{"start":{"line":17,"column":76},"end":{"line":17,"column":77}},"loc":{"start":{"line":17,"column":95},"end":{"line":17,"column":121}},"line":17},"10":{"name":"(anonymous_10)","decl":{"start":{"line":27,"column":4},"end":{"line":27,"column":5}},"loc":{"start":{"line":27,"column":17},"end":{"line":31,"column":5}},"line":27},"11":{"name":"(anonymous_11)","decl":{"start":{"line":28,"column":47},"end":{"line":28,"column":48}},"loc":{"start":{"line":28,"column":60},"end":{"line":30,"column":9}},"line":28},"12":{"name":"(anonymous_12)","decl":{"start":{"line":32,"column":4},"end":{"line":32,"column":5}},"loc":{"start":{"line":32,"column":35},"end":{"line":36,"column":5}},"line":32},"13":{"name":"(anonymous_13)","decl":{"start":{"line":33,"column":47},"end":{"line":33,"column":48}},"loc":{"start":{"line":33,"column":60},"end":{"line":35,"column":9}},"line":33},"14":{"name":"(anonymous_14)","decl":{"start":{"line":37,"column":4},"end":{"line":37,"column":5}},"loc":{"start":{"line":37,"column":24},"end":{"line":41,"column":5}},"line":37},"15":{"name":"(anonymous_15)","decl":{"start":{"line":38,"column":47},"end":{"line":38,"column":48}},"loc":{"start":{"line":38,"column":60},"end":{"line":40,"column":9}},"line":38},"16":{"name":"(anonymous_16)","decl":{"start":{"line":42,"column":4},"end":{"line":42,"column":5}},"loc":{"start":{"line":42,"column":31},"end":{"line":47,"column":5}},"line":42},"17":{"name":"(anonymous_17)","decl":{"start":{"line":43,"column":47},"end":{"line":43,"column":48}},"loc":{"start":{"line":43,"column":60},"end":{"line":46,"column":9}},"line":43},"18":{"name":"(anonymous_18)","decl":{"start":{"line":48,"column":4},"end":{"line":48,"column":5}},"loc":{"start":{"line":48,"column":19},"end":{"line":52,"column":5}},"line":48},"19":{"name":"(anonymous_19)","decl":{"start":{"line":49,"column":47},"end":{"line":49,"column":48}},"loc":{"start":{"line":49,"column":60},"end":{"line":51,"column":9}},"line":49},"20":{"name":"(anonymous_20)","decl":{"start":{"line":53,"column":4},"end":{"line":53,"column":5}},"loc":{"start":{"line":53,"column":74},"end":{"line":58,"column":5}},"line":53},"21":{"name":"(anonymous_21)","decl":{"start":{"line":54,"column":47},"end":{"line":54,"column":48}},"loc":{"start":{"line":54,"column":60},"end":{"line":57,"column":9}},"line":54}},"branchMap":{"0":{"loc":{"start":{"line":1,"column":17},"end":{"line":6,"column":1}},"type":"binary-expr","locations":[{"start":{"line":1,"column":18},"end":{"line":1,"column":22}},{"start":{"line":1,"column":26},"end":{"line":1,"column":41}},{"start":{"line":1,"column":46},"end":{"line":6,"column":1}}],"line":1},"1":{"loc":{"start":{"line":2,"column":34},"end":{"line":2,"column":125}},"type":"cond-expr","locations":[{"start":{"line":2,"column":42},"end":{"line":2,"column":48}},{"start":{"line":2,"column":51},"end":{"line":2,"column":125}}],"line":2},"2":{"loc":{"start":{"line":2,"column":51},"end":{"line":2,"column":125}},"type":"cond-expr","locations":[{"start":{"line":2,"column":67},"end":{"line":2,"column":118}},{"start":{"line":2,"column":121},"end":{"line":2,"column":125}}],"line":2},"3":{"loc":{"start":{"line":3,"column":4},"end":{"line":4,"column":150}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":4,"column":150}},{"start":{"line":3,"column":4},"end":{"line":4,"column":150}}],"line":3},"4":{"loc":{"start":{"line":3,"column":8},"end":{"line":3,"column":77}},"type":"binary-expr","locations":[{"start":{"line":3,"column":8},"end":{"line":3,"column":35}},{"start":{"line":3,"column":39},"end":{"line":3,"column":77}}],"line":3},"5":{"loc":{"start":{"line":4,"column":58},"end":{"line":4,"column":150}},"type":"if","locations":[{"start":{"line":4,"column":58},"end":{"line":4,"column":150}},{"start":{"line":4,"column":58},"end":{"line":4,"column":150}}],"line":4},"6":{"loc":{"start":{"line":4,"column":85},"end":{"line":4,"column":149}},"type":"binary-expr","locations":[{"start":{"line":4,"column":86},"end":{"line":4,"column":143}},{"start":{"line":4,"column":148},"end":{"line":4,"column":149}}],"line":4},"7":{"loc":{"start":{"line":4,"column":86},"end":{"line":4,"column":143}},"type":"cond-expr","locations":[{"start":{"line":4,"column":94},"end":{"line":4,"column":98}},{"start":{"line":4,"column":101},"end":{"line":4,"column":143}}],"line":4},"8":{"loc":{"start":{"line":4,"column":101},"end":{"line":4,"column":143}},"type":"cond-expr","locations":[{"start":{"line":4,"column":109},"end":{"line":4,"column":126}},{"start":{"line":4,"column":129},"end":{"line":4,"column":143}}],"line":4},"9":{"loc":{"start":{"line":5,"column":11},"end":{"line":5,"column":62}},"type":"binary-expr","locations":[{"start":{"line":5,"column":11},"end":{"line":5,"column":16}},{"start":{"line":5,"column":20},"end":{"line":5,"column":21}},{"start":{"line":5,"column":25},"end":{"line":5,"column":62}}],"line":5},"10":{"loc":{"start":{"line":7,"column":17},"end":{"line":9,"column":1}},"type":"binary-expr","locations":[{"start":{"line":7,"column":18},"end":{"line":7,"column":22}},{"start":{"line":7,"column":26},"end":{"line":7,"column":41}},{"start":{"line":7,"column":46},"end":{"line":9,"column":1}}],"line":7},"11":{"loc":{"start":{"line":8,"column":4},"end":{"line":8,"column":109}},"type":"if","locations":[{"start":{"line":8,"column":4},"end":{"line":8,"column":109}},{"start":{"line":8,"column":4},"end":{"line":8,"column":109}}],"line":8},"12":{"loc":{"start":{"line":8,"column":8},"end":{"line":8,"column":77}},"type":"binary-expr","locations":[{"start":{"line":8,"column":8},"end":{"line":8,"column":35}},{"start":{"line":8,"column":39},"end":{"line":8,"column":77}}],"line":8},"13":{"loc":{"start":{"line":10,"column":14},"end":{"line":12,"column":1}},"type":"binary-expr","locations":[{"start":{"line":10,"column":15},"end":{"line":10,"column":19}},{"start":{"line":10,"column":23},"end":{"line":10,"column":35}},{"start":{"line":10,"column":40},"end":{"line":12,"column":1}}],"line":10},"14":{"loc":{"start":{"line":13,"column":16},"end":{"line":20,"column":1}},"type":"binary-expr","locations":[{"start":{"line":13,"column":17},"end":{"line":13,"column":21}},{"start":{"line":13,"column":25},"end":{"line":13,"column":39}},{"start":{"line":13,"column":44},"end":{"line":20,"column":1}}],"line":13},"15":{"loc":{"start":{"line":14,"column":16},"end":{"line":14,"column":34}},"type":"binary-expr","locations":[{"start":{"line":14,"column":16},"end":{"line":14,"column":17}},{"start":{"line":14,"column":22},"end":{"line":14,"column":33}}],"line":14},"16":{"loc":{"start":{"line":17,"column":32},"end":{"line":17,"column":148}},"type":"cond-expr","locations":[{"start":{"line":17,"column":46},"end":{"line":17,"column":67}},{"start":{"line":17,"column":70},"end":{"line":17,"column":148}}],"line":17},"17":{"loc":{"start":{"line":18,"column":51},"end":{"line":18,"column":67}},"type":"binary-expr","locations":[{"start":{"line":18,"column":51},"end":{"line":18,"column":61}},{"start":{"line":18,"column":65},"end":{"line":18,"column":67}}],"line":18},"18":{"loc":{"start":{"line":65,"column":37},"end":{"line":65,"column":123}},"type":"binary-expr","locations":[{"start":{"line":65,"column":37},"end":{"line":65,"column":107}},{"start":{"line":65,"column":111},"end":{"line":65,"column":113}},{"start":{"line":65,"column":117},"end":{"line":65,"column":123}}],"line":65},"19":{"loc":{"start":{"line":65,"column":50},"end":{"line":65,"column":91}},"type":"binary-expr","locations":[{"start":{"line":65,"column":50},"end":{"line":65,"column":80}},{"start":{"line":65,"column":84},"end":{"line":65,"column":91}}],"line":65},"20":{"loc":{"start":{"line":65,"column":153},"end":{"line":65,"column":261}},"type":"binary-expr","locations":[{"start":{"line":65,"column":153},"end":{"line":65,"column":245}},{"start":{"line":65,"column":249},"end":{"line":65,"column":251}},{"start":{"line":65,"column":255},"end":{"line":65,"column":261}}],"line":65},"21":{"loc":{"start":{"line":65,"column":166},"end":{"line":65,"column":229}},"type":"binary-expr","locations":[{"start":{"line":65,"column":166},"end":{"line":65,"column":207}},{"start":{"line":65,"column":211},"end":{"line":65,"column":229}}],"line":65},"22":{"loc":{"start":{"line":66,"column":36},"end":{"line":66,"column":122}},"type":"binary-expr","locations":[{"start":{"line":66,"column":36},"end":{"line":66,"column":106}},{"start":{"line":66,"column":110},"end":{"line":66,"column":112}},{"start":{"line":66,"column":116},"end":{"line":66,"column":122}}],"line":66},"23":{"loc":{"start":{"line":66,"column":49},"end":{"line":66,"column":90}},"type":"binary-expr","locations":[{"start":{"line":66,"column":49},"end":{"line":66,"column":79}},{"start":{"line":66,"column":83},"end":{"line":66,"column":90}}],"line":66}},"s":{"0":2,"1":4,"2":4,"3":4,"4":4,"5":0,"6":0,"7":0,"8":4,"9":2,"10":6,"11":6,"12":2,"13":4,"14":4,"15":2,"16":7,"17":4,"18":4,"19":0,"20":0,"21":0,"22":0,"23":11,"24":4,"25":7,"26":2,"27":3,"28":3,"29":0,"30":0,"31":0,"32":0,"33":3,"34":3,"35":3,"36":1,"37":1,"38":0,"39":0,"40":0,"41":2,"42":2},"f":{"0":4,"1":6,"2":4,"3":4,"4":7,"5":7,"6":4,"7":0,"8":11,"9":4,"10":3,"11":3,"12":0,"13":0,"14":0,"15":0,"16":3,"17":3,"18":1,"19":1,"20":0,"21":0},"b":{"0":[2,0,2],"1":[2,2],"2":[2,0],"3":[4,0],"4":[4,4],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[4,2,2],"10":[2,0,2],"11":[6,0],"12":[6,6],"13":[2,0,2],"14":[2,0,2],"15":[7,7],"16":[7,4],"17":[7,7],"18":[2,2,0],"19":[2,2],"20":[2,2,0],"21":[2,2],"22":[2,2,0],"23":[2,2]},"inputSourceMap":{"version":3,"file":"storages.repository.js","sourceRoot":"","sources":["storages.repository.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA,OAAO,EAAC,cAAc,EAAE,MAAM,eAAe,CAAC;AAC9C,OAAO,EAAE,OAAO,EAAE,MAAM,kBAAkB,CAAC;AAC3C,OAAO,EACL,gBAAgB,EAChB,WAAW,EAAE,qBAAqB,GACnC,MAAM,SAAS,CAAC;AACjB,OAAO,EAAE,kBAAkB,EAAE,MAAM,iCAAiC,CAAC;AAGrE,IAAa,kBAAkB,GAA/B,wBAAgC,SAAQ,cAAuB;IAErD,QAAQ,CAAC,EAAU;;YACrB,OAAO,IAAI,CAAC,OAAO,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;QAChC,CAAC;KAAA;IAEK,mBAAmB,CAAC,SAAiB;;YACvC,OAAO,IAAI,CAAC,IAAI,CAAC,EAAE,SAAS,EAAE,CAAC,CAAC;QACpC,CAAC;KAAA;IAEK,aAAa,CAAC,IAAY;;YAC5B,OAAO,IAAI,CAAC,OAAO,CAAC,EAAE,IAAI,EAAE,CAAC,CAAC;QAClC,CAAC;KAAA;IAEK,gBAAgB,CAAC,EAAU,EAAE,IAAsB;;YACrD,MAAM,IAAI,CAAC,MAAM,CAAC,EAAE,EAAE,EAAE,oBAAO,IAAI,EAAG,CAAC;YACvC,OAAO,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;QAC7B,CAAC;KAAA;IAEK,UAAU,CAAC,EAAU;;YACvB,MAAM,IAAI,CAAC,MAAM,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;QAC9B,CAAC;KAAA;IAGK,SAAS,CACb,OAAgB,EAChB,SAAiB,EAEjB,kBAAuC,EAEvC,kBAAuC;;YAErC,MAAM,kBAAkB,CAAC,sBAAsB,CAAC,SAAS,CAAC,CAAC;YAC3D,OAAO,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAC9B,CAAC;KAAA;CACJ,CAAA;AAXG;IADC,WAAW,EAAE;IAIX,WAAA,qBAAqB,EAAE,CAAA;IAEvB,WAAA,qBAAqB,EAAE,CAAA;;yDAJf,OAAO,oBAAP,OAAO,0CAGK,kBAAkB,sBAElB,kBAAkB,oBAAlB,kBAAkB;wDACtC,OAAO,oBAAP,OAAO;mDAGT;AAlCQ,kBAAkB;IAD9B,gBAAgB,CAAC,OAAO,CAAC;GACb,kBAAkB,CAmC9B;SAnCY,kBAAkB","sourcesContent":["import {BaseRepository } from '@bit/alan18081.astra-storage.common.dist';\nimport { Storage } from './storage.entity';\nimport {\n  EntityRepository,\n  Transaction, TransactionRepository,\n} from 'typeorm';\nimport { ProjectsRepository } from '../projects/projects.repository';\n\n@EntityRepository(Storage)\nexport class StoragesRepository extends BaseRepository<Storage> {\n\n    async findById(id: number): Promise<Storage | undefined> {\n        return this.findOne({ id });\n    }\n\n    async findManyByProjectId(projectId: number): Promise<Storage[]> {\n        return this.find({ projectId });\n    }\n\n    async findOneByPath(path: string): Promise<Storage | undefined> {\n        return this.findOne({ path });\n    }\n\n    async updateOneAndFind(id: number, data: Partial<Storage>): Promise<Storage | undefined> {\n        await this.update({ id }, { ...data });\n        return this.findById(id);\n    }\n\n    async removeById(id: number): Promise<void> {\n        await this.delete({ id });\n    }\n\n    @Transaction()\n    async createOne(\n      storage: Storage,\n      projectId: number,\n      @TransactionRepository()\n      storagesRepository?: StoragesRepository,\n      @TransactionRepository()\n      projectsRepository?: ProjectsRepository,\n    ): Promise<Storage> {\n        await projectsRepository.incrementStoragesCount(projectId);\n        return this.save(storage);\n    }\n}"]},"_coverageSchema":"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c","hash":"f7843a684e2e1a0f9c3a7fcc617553873c028a6a"}
,"/home/alex/PhpstormProjects/astra-storage/ProjectsService/src/components/storages/storages.service.ts": {"path":"/home/alex/PhpstormProjects/astra-storage/ProjectsService/src/components/storages/storages.service.ts","statementMap":{"0":{"start":{"line":1,"column":17},"end":{"line":6,"column":1}},"1":{"start":{"line":2,"column":12},"end":{"line":2,"column":28}},"2":{"start":{"line":2,"column":34},"end":{"line":2,"column":125}},"3":{"start":{"line":3,"column":4},"end":{"line":4,"column":150}},"4":{"start":{"line":3,"column":79},"end":{"line":3,"column":131}},"5":{"start":{"line":4,"column":9},"end":{"line":4,"column":150}},"6":{"start":{"line":4,"column":58},"end":{"line":4,"column":150}},"7":{"start":{"line":4,"column":81},"end":{"line":4,"column":150}},"8":{"start":{"line":5,"column":4},"end":{"line":5,"column":66}},"9":{"start":{"line":7,"column":17},"end":{"line":9,"column":1}},"10":{"start":{"line":8,"column":4},"end":{"line":8,"column":109}},"11":{"start":{"line":8,"column":79},"end":{"line":8,"column":109}},"12":{"start":{"line":10,"column":14},"end":{"line":12,"column":1}},"13":{"start":{"line":11,"column":4},"end":{"line":11,"column":73}},"14":{"start":{"line":11,"column":36},"end":{"line":11,"column":71}},"15":{"start":{"line":13,"column":16},"end":{"line":20,"column":1}},"16":{"start":{"line":14,"column":4},"end":{"line":19,"column":7}},"17":{"start":{"line":15,"column":36},"end":{"line":15,"column":97}},"18":{"start":{"line":15,"column":42},"end":{"line":15,"column":70}},"19":{"start":{"line":15,"column":85},"end":{"line":15,"column":95}},"20":{"start":{"line":16,"column":35},"end":{"line":16,"column":100}},"21":{"start":{"line":16,"column":41},"end":{"line":16,"column":73}},"22":{"start":{"line":16,"column":88},"end":{"line":16,"column":98}},"23":{"start":{"line":17,"column":32},"end":{"line":17,"column":149}},"24":{"start":{"line":17,"column":97},"end":{"line":17,"column":119}},"25":{"start":{"line":18,"column":8},"end":{"line":18,"column":78}},"26":{"start":{"line":21,"column":13},"end":{"line":29,"column":1}},"27":{"start":{"line":22,"column":12},"end":{"line":22,"column":14}},"28":{"start":{"line":23,"column":4},"end":{"line":24,"column":20}},"29":{"start":{"line":23,"column":21},"end":{"line":24,"column":20}},"30":{"start":{"line":24,"column":8},"end":{"line":24,"column":20}},"31":{"start":{"line":25,"column":4},"end":{"line":27,"column":30}},"32":{"start":{"line":26,"column":8},"end":{"line":27,"column":30}},"33":{"start":{"line":26,"column":80},"end":{"line":27,"column":30}},"34":{"start":{"line":27,"column":12},"end":{"line":27,"column":30}},"35":{"start":{"line":28,"column":4},"end":{"line":28,"column":13}},"36":{"start":{"line":38,"column":22},"end":{"line":90,"column":1}},"37":{"start":{"line":40,"column":8},"end":{"line":40,"column":53}},"38":{"start":{"line":41,"column":8},"end":{"line":41,"column":47}},"39":{"start":{"line":44,"column":8},"end":{"line":53,"column":11}},"40":{"start":{"line":45,"column":28},"end":{"line":45,"column":89}},"41":{"start":{"line":46,"column":12},"end":{"line":48,"column":13}},"42":{"start":{"line":47,"column":16},"end":{"line":47,"column":69}},"43":{"start":{"line":49,"column":12},"end":{"line":51,"column":13}},"44":{"start":{"line":50,"column":16},"end":{"line":50,"column":102}},"45":{"start":{"line":52,"column":12},"end":{"line":52,"column":74}},"46":{"start":{"line":56,"column":8},"end":{"line":58,"column":11}},"47":{"start":{"line":57,"column":12},"end":{"line":57,"column":56}},"48":{"start":{"line":61,"column":8},"end":{"line":63,"column":11}},"49":{"start":{"line":62,"column":12},"end":{"line":62,"column":63}},"50":{"start":{"line":66,"column":36},"end":{"line":66,"column":38}},"51":{"start":{"line":66,"column":47},"end":{"line":66,"column":82}},"52":{"start":{"line":67,"column":8},"end":{"line":78,"column":11}},"53":{"start":{"line":68,"column":28},"end":{"line":68,"column":74}},"54":{"start":{"line":69,"column":12},"end":{"line":71,"column":13}},"55":{"start":{"line":70,"column":16},"end":{"line":70,"column":67}},"56":{"start":{"line":72,"column":34},"end":{"line":72,"column":88}},"57":{"start":{"line":73,"column":12},"end":{"line":75,"column":13}},"58":{"start":{"line":74,"column":16},"end":{"line":74,"column":68}},"59":{"start":{"line":76,"column":28},"end":{"line":76,"column":64}},"60":{"start":{"line":77,"column":12},"end":{"line":77,"column":81}},"61":{"start":{"line":81,"column":8},"end":{"line":83,"column":11}},"62":{"start":{"line":82,"column":12},"end":{"line":82,"column":70}},"63":{"start":{"line":86,"column":8},"end":{"line":88,"column":11}},"64":{"start":{"line":87,"column":12},"end":{"line":87,"column":57}},"65":{"start":{"line":91,"column":0},"end":{"line":95,"column":20}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":1,"column":46},"end":{"line":1,"column":47}},"loc":{"start":{"line":1,"column":87},"end":{"line":6,"column":1}},"line":1},"1":{"name":"(anonymous_1)","decl":{"start":{"line":7,"column":46},"end":{"line":7,"column":47}},"loc":{"start":{"line":7,"column":62},"end":{"line":9,"column":1}},"line":7},"2":{"name":"(anonymous_2)","decl":{"start":{"line":10,"column":40},"end":{"line":10,"column":41}},"loc":{"start":{"line":10,"column":73},"end":{"line":12,"column":1}},"line":10},"3":{"name":"(anonymous_3)","decl":{"start":{"line":11,"column":11},"end":{"line":11,"column":12}},"loc":{"start":{"line":11,"column":34},"end":{"line":11,"column":73}},"line":11},"4":{"name":"(anonymous_4)","decl":{"start":{"line":13,"column":44},"end":{"line":13,"column":45}},"loc":{"start":{"line":13,"column":89},"end":{"line":20,"column":1}},"line":13},"5":{"name":"(anonymous_5)","decl":{"start":{"line":14,"column":36},"end":{"line":14,"column":37}},"loc":{"start":{"line":14,"column":63},"end":{"line":19,"column":5}},"line":14},"6":{"name":"fulfilled","decl":{"start":{"line":15,"column":17},"end":{"line":15,"column":26}},"loc":{"start":{"line":15,"column":34},"end":{"line":15,"column":99}},"line":15},"7":{"name":"rejected","decl":{"start":{"line":16,"column":17},"end":{"line":16,"column":25}},"loc":{"start":{"line":16,"column":33},"end":{"line":16,"column":102}},"line":16},"8":{"name":"step","decl":{"start":{"line":17,"column":17},"end":{"line":17,"column":21}},"loc":{"start":{"line":17,"column":30},"end":{"line":17,"column":151}},"line":17},"9":{"name":"(anonymous_9)","decl":{"start":{"line":17,"column":76},"end":{"line":17,"column":77}},"loc":{"start":{"line":17,"column":95},"end":{"line":17,"column":121}},"line":17},"10":{"name":"(anonymous_10)","decl":{"start":{"line":21,"column":38},"end":{"line":21,"column":39}},"loc":{"start":{"line":21,"column":54},"end":{"line":29,"column":1}},"line":21},"11":{"name":"(anonymous_11)","decl":{"start":{"line":39,"column":4},"end":{"line":39,"column":5}},"loc":{"start":{"line":39,"column":53},"end":{"line":42,"column":5}},"line":39},"12":{"name":"(anonymous_12)","decl":{"start":{"line":43,"column":4},"end":{"line":43,"column":5}},"loc":{"start":{"line":43,"column":58},"end":{"line":54,"column":5}},"line":43},"13":{"name":"(anonymous_13)","decl":{"start":{"line":44,"column":47},"end":{"line":44,"column":48}},"loc":{"start":{"line":44,"column":60},"end":{"line":53,"column":9}},"line":44},"14":{"name":"(anonymous_14)","decl":{"start":{"line":55,"column":4},"end":{"line":55,"column":5}},"loc":{"start":{"line":55,"column":17},"end":{"line":59,"column":5}},"line":55},"15":{"name":"(anonymous_15)","decl":{"start":{"line":56,"column":47},"end":{"line":56,"column":48}},"loc":{"start":{"line":56,"column":60},"end":{"line":58,"column":9}},"line":56},"16":{"name":"(anonymous_16)","decl":{"start":{"line":60,"column":4},"end":{"line":60,"column":5}},"loc":{"start":{"line":60,"column":24},"end":{"line":64,"column":5}},"line":60},"17":{"name":"(anonymous_17)","decl":{"start":{"line":61,"column":47},"end":{"line":61,"column":48}},"loc":{"start":{"line":61,"column":60},"end":{"line":63,"column":9}},"line":61},"18":{"name":"(anonymous_18)","decl":{"start":{"line":65,"column":4},"end":{"line":65,"column":5}},"loc":{"start":{"line":65,"column":18},"end":{"line":79,"column":5}},"line":65},"19":{"name":"(anonymous_19)","decl":{"start":{"line":67,"column":47},"end":{"line":67,"column":48}},"loc":{"start":{"line":67,"column":60},"end":{"line":78,"column":9}},"line":67},"20":{"name":"(anonymous_20)","decl":{"start":{"line":80,"column":4},"end":{"line":80,"column":5}},"loc":{"start":{"line":80,"column":24},"end":{"line":84,"column":5}},"line":80},"21":{"name":"(anonymous_21)","decl":{"start":{"line":81,"column":47},"end":{"line":81,"column":48}},"loc":{"start":{"line":81,"column":60},"end":{"line":83,"column":9}},"line":81},"22":{"name":"(anonymous_22)","decl":{"start":{"line":85,"column":4},"end":{"line":85,"column":5}},"loc":{"start":{"line":85,"column":19},"end":{"line":89,"column":5}},"line":85},"23":{"name":"(anonymous_23)","decl":{"start":{"line":86,"column":47},"end":{"line":86,"column":48}},"loc":{"start":{"line":86,"column":60},"end":{"line":88,"column":9}},"line":86}},"branchMap":{"0":{"loc":{"start":{"line":1,"column":17},"end":{"line":6,"column":1}},"type":"binary-expr","locations":[{"start":{"line":1,"column":18},"end":{"line":1,"column":22}},{"start":{"line":1,"column":26},"end":{"line":1,"column":41}},{"start":{"line":1,"column":46},"end":{"line":6,"column":1}}],"line":1},"1":{"loc":{"start":{"line":2,"column":34},"end":{"line":2,"column":125}},"type":"cond-expr","locations":[{"start":{"line":2,"column":42},"end":{"line":2,"column":48}},{"start":{"line":2,"column":51},"end":{"line":2,"column":125}}],"line":2},"2":{"loc":{"start":{"line":2,"column":51},"end":{"line":2,"column":125}},"type":"cond-expr","locations":[{"start":{"line":2,"column":67},"end":{"line":2,"column":118}},{"start":{"line":2,"column":121},"end":{"line":2,"column":125}}],"line":2},"3":{"loc":{"start":{"line":3,"column":4},"end":{"line":4,"column":150}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":4,"column":150}},{"start":{"line":3,"column":4},"end":{"line":4,"column":150}}],"line":3},"4":{"loc":{"start":{"line":3,"column":8},"end":{"line":3,"column":77}},"type":"binary-expr","locations":[{"start":{"line":3,"column":8},"end":{"line":3,"column":35}},{"start":{"line":3,"column":39},"end":{"line":3,"column":77}}],"line":3},"5":{"loc":{"start":{"line":4,"column":58},"end":{"line":4,"column":150}},"type":"if","locations":[{"start":{"line":4,"column":58},"end":{"line":4,"column":150}},{"start":{"line":4,"column":58},"end":{"line":4,"column":150}}],"line":4},"6":{"loc":{"start":{"line":4,"column":85},"end":{"line":4,"column":149}},"type":"binary-expr","locations":[{"start":{"line":4,"column":86},"end":{"line":4,"column":143}},{"start":{"line":4,"column":148},"end":{"line":4,"column":149}}],"line":4},"7":{"loc":{"start":{"line":4,"column":86},"end":{"line":4,"column":143}},"type":"cond-expr","locations":[{"start":{"line":4,"column":94},"end":{"line":4,"column":98}},{"start":{"line":4,"column":101},"end":{"line":4,"column":143}}],"line":4},"8":{"loc":{"start":{"line":4,"column":101},"end":{"line":4,"column":143}},"type":"cond-expr","locations":[{"start":{"line":4,"column":109},"end":{"line":4,"column":126}},{"start":{"line":4,"column":129},"end":{"line":4,"column":143}}],"line":4},"9":{"loc":{"start":{"line":5,"column":11},"end":{"line":5,"column":62}},"type":"binary-expr","locations":[{"start":{"line":5,"column":11},"end":{"line":5,"column":16}},{"start":{"line":5,"column":20},"end":{"line":5,"column":21}},{"start":{"line":5,"column":25},"end":{"line":5,"column":62}}],"line":5},"10":{"loc":{"start":{"line":7,"column":17},"end":{"line":9,"column":1}},"type":"binary-expr","locations":[{"start":{"line":7,"column":18},"end":{"line":7,"column":22}},{"start":{"line":7,"column":26},"end":{"line":7,"column":41}},{"start":{"line":7,"column":46},"end":{"line":9,"column":1}}],"line":7},"11":{"loc":{"start":{"line":8,"column":4},"end":{"line":8,"column":109}},"type":"if","locations":[{"start":{"line":8,"column":4},"end":{"line":8,"column":109}},{"start":{"line":8,"column":4},"end":{"line":8,"column":109}}],"line":8},"12":{"loc":{"start":{"line":8,"column":8},"end":{"line":8,"column":77}},"type":"binary-expr","locations":[{"start":{"line":8,"column":8},"end":{"line":8,"column":35}},{"start":{"line":8,"column":39},"end":{"line":8,"column":77}}],"line":8},"13":{"loc":{"start":{"line":10,"column":14},"end":{"line":12,"column":1}},"type":"binary-expr","locations":[{"start":{"line":10,"column":15},"end":{"line":10,"column":19}},{"start":{"line":10,"column":23},"end":{"line":10,"column":35}},{"start":{"line":10,"column":40},"end":{"line":12,"column":1}}],"line":10},"14":{"loc":{"start":{"line":13,"column":16},"end":{"line":20,"column":1}},"type":"binary-expr","locations":[{"start":{"line":13,"column":17},"end":{"line":13,"column":21}},{"start":{"line":13,"column":25},"end":{"line":13,"column":39}},{"start":{"line":13,"column":44},"end":{"line":20,"column":1}}],"line":13},"15":{"loc":{"start":{"line":14,"column":16},"end":{"line":14,"column":34}},"type":"binary-expr","locations":[{"start":{"line":14,"column":16},"end":{"line":14,"column":17}},{"start":{"line":14,"column":22},"end":{"line":14,"column":33}}],"line":14},"16":{"loc":{"start":{"line":17,"column":32},"end":{"line":17,"column":148}},"type":"cond-expr","locations":[{"start":{"line":17,"column":46},"end":{"line":17,"column":67}},{"start":{"line":17,"column":70},"end":{"line":17,"column":148}}],"line":17},"17":{"loc":{"start":{"line":18,"column":51},"end":{"line":18,"column":67}},"type":"binary-expr","locations":[{"start":{"line":18,"column":51},"end":{"line":18,"column":61}},{"start":{"line":18,"column":65},"end":{"line":18,"column":67}}],"line":18},"18":{"loc":{"start":{"line":21,"column":13},"end":{"line":29,"column":1}},"type":"binary-expr","locations":[{"start":{"line":21,"column":14},"end":{"line":21,"column":18}},{"start":{"line":21,"column":22},"end":{"line":21,"column":33}},{"start":{"line":21,"column":38},"end":{"line":29,"column":1}}],"line":21},"19":{"loc":{"start":{"line":23,"column":21},"end":{"line":24,"column":20}},"type":"if","locations":[{"start":{"line":23,"column":21},"end":{"line":24,"column":20}},{"start":{"line":23,"column":21},"end":{"line":24,"column":20}}],"line":23},"20":{"loc":{"start":{"line":23,"column":25},"end":{"line":23,"column":87}},"type":"binary-expr","locations":[{"start":{"line":23,"column":25},"end":{"line":23,"column":67}},{"start":{"line":23,"column":71},"end":{"line":23,"column":87}}],"line":23},"21":{"loc":{"start":{"line":25,"column":4},"end":{"line":27,"column":30}},"type":"if","locations":[{"start":{"line":25,"column":4},"end":{"line":27,"column":30}},{"start":{"line":25,"column":4},"end":{"line":27,"column":30}}],"line":25},"22":{"loc":{"start":{"line":25,"column":8},"end":{"line":25,"column":71}},"type":"binary-expr","locations":[{"start":{"line":25,"column":8},"end":{"line":25,"column":17}},{"start":{"line":25,"column":21},"end":{"line":25,"column":71}}],"line":25},"23":{"loc":{"start":{"line":26,"column":80},"end":{"line":27,"column":30}},"type":"if","locations":[{"start":{"line":26,"column":80},"end":{"line":27,"column":30}},{"start":{"line":26,"column":80},"end":{"line":27,"column":30}}],"line":26},"24":{"loc":{"start":{"line":46,"column":12},"end":{"line":48,"column":13}},"type":"if","locations":[{"start":{"line":46,"column":12},"end":{"line":48,"column":13}},{"start":{"line":46,"column":12},"end":{"line":48,"column":13}}],"line":46},"25":{"loc":{"start":{"line":49,"column":12},"end":{"line":51,"column":13}},"type":"if","locations":[{"start":{"line":49,"column":12},"end":{"line":51,"column":13}},{"start":{"line":49,"column":12},"end":{"line":51,"column":13}}],"line":49},"26":{"loc":{"start":{"line":49,"column":16},"end":{"line":49,"column":29}},"type":"binary-expr","locations":[{"start":{"line":49,"column":16},"end":{"line":49,"column":20}},{"start":{"line":49,"column":24},"end":{"line":49,"column":29}}],"line":49},"27":{"loc":{"start":{"line":69,"column":12},"end":{"line":71,"column":13}},"type":"if","locations":[{"start":{"line":69,"column":12},"end":{"line":71,"column":13}},{"start":{"line":69,"column":12},"end":{"line":71,"column":13}}],"line":69},"28":{"loc":{"start":{"line":73,"column":12},"end":{"line":75,"column":13}},"type":"if","locations":[{"start":{"line":73,"column":12},"end":{"line":75,"column":13}},{"start":{"line":73,"column":12},"end":{"line":75,"column":13}}],"line":73},"29":{"loc":{"start":{"line":94,"column":37},"end":{"line":94,"column":145}},"type":"binary-expr","locations":[{"start":{"line":94,"column":37},"end":{"line":94,"column":129}},{"start":{"line":94,"column":133},"end":{"line":94,"column":135}},{"start":{"line":94,"column":139},"end":{"line":94,"column":145}}],"line":94},"30":{"loc":{"start":{"line":94,"column":50},"end":{"line":94,"column":113}},"type":"binary-expr","locations":[{"start":{"line":94,"column":50},"end":{"line":94,"column":91}},{"start":{"line":94,"column":95},"end":{"line":94,"column":113}}],"line":94},"31":{"loc":{"start":{"line":94,"column":147},"end":{"line":94,"column":249}},"type":"binary-expr","locations":[{"start":{"line":94,"column":147},"end":{"line":94,"column":233}},{"start":{"line":94,"column":237},"end":{"line":94,"column":239}},{"start":{"line":94,"column":243},"end":{"line":94,"column":249}}],"line":94},"32":{"loc":{"start":{"line":94,"column":160},"end":{"line":94,"column":217}},"type":"binary-expr","locations":[{"start":{"line":94,"column":160},"end":{"line":94,"column":198}},{"start":{"line":94,"column":202},"end":{"line":94,"column":217}}],"line":94}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":15,"17":12,"18":12,"19":2,"20":0,"21":0,"22":0,"23":25,"24":12,"25":15,"26":1,"27":3,"28":3,"29":15,"30":9,"31":3,"32":3,"33":0,"34":0,"35":3,"36":1,"37":15,"38":15,"39":5,"40":5,"41":5,"42":1,"43":4,"44":1,"45":3,"46":2,"47":2,"48":0,"49":0,"50":3,"51":3,"52":3,"53":3,"54":3,"55":0,"56":3,"57":3,"58":1,"59":2,"60":2,"61":4,"62":4,"63":1,"64":1,"65":1},"f":{"0":1,"1":1,"2":1,"3":1,"4":15,"5":15,"6":12,"7":0,"8":25,"9":12,"10":3,"11":15,"12":5,"13":5,"14":2,"15":2,"16":0,"17":0,"18":3,"19":3,"20":4,"21":4,"22":1,"23":1},"b":{"0":[1,0,1],"1":[1,0],"2":[0,0],"3":[1,0],"4":[1,1],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[1,0,0],"10":[1,0,1],"11":[1,0],"12":[1,1],"13":[1,0,1],"14":[1,0,1],"15":[15,15],"16":[13,12],"17":[15,15],"18":[1,0,1],"19":[9,6],"20":[15,15],"21":[3,0],"22":[3,3],"23":[0,0],"24":[1,4],"25":[1,3],"26":[4,1],"27":[0,3],"28":[1,2],"29":[1,1,0],"30":[1,1],"31":[1,1,0],"32":[1,1]},"inputSourceMap":{"version":3,"file":"storages.service.js","sourceRoot":"","sources":["storages.service.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAO,EAAE,QAAQ,EAAqB,MAAM,eAAe,CAAC;AAC5D,OAAO,EAAE,OAAO,EAAC,MAAM,kBAAkB,CAAC;AAC1C,OAAO,EAAC,kBAAkB,EAAC,MAAM,uBAAuB,CAAC;AACzD,OAAO,EAAE,UAAU,EAAE,MAAM,gBAAgB,CAAC;AAE5C,OAAO,EAAE,YAAY,EAAE,MAAM,uBAAuB,CAAC;AACrD,OAAO,EAAC,gBAAgB,EAAC,MAAM,iBAAiB,CAAC;AACjD,OAAO,EAAC,eAAe,EAAC,MAAM,8BAA8B,CAAC;AAG7D,IAAa,eAAe,GAA5B;IAEE,YAEmB,kBAAsC,EACtC,eAAgC;QADhC,uBAAkB,GAAlB,kBAAkB,CAAoB;QACtC,oBAAe,GAAf,eAAe,CAAiB;IAChD,CAAC;IAEE,iBAAiB,CAAC,EAAE,SAAS,EAAE,MAAM,EAAE,IAAI,EAAE,KAAK,EAAuB;;YAC7E,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,eAAe,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC;YAE9E,IAAI,CAAC,OAAO,EAAE;gBACZ,MAAM,IAAI,YAAY,CAAC,QAAQ,CAAC,mBAAmB,CAAC,CAAC;aACtD;YAED,IAAI,IAAI,IAAI,KAAK,EAAE;gBACjB,OAAO,IAAI,CAAC,kBAAkB,CAAC,sBAAsB,CAAC,EAAE,SAAS,EAAE,EAAE,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC,CAAC;aACvF;YAED,OAAO,IAAI,CAAC,kBAAkB,CAAC,mBAAmB,CAAC,SAAS,CAAC,CAAC;QAChE,CAAC;KAAA;IAEK,QAAQ,CAAC,EAAU;;YACvB,OAAO,IAAI,CAAC,kBAAkB,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;QAC9C,CAAC;KAAA;IAEK,aAAa,CAAC,IAAY;;YAC9B,OAAO,IAAI,CAAC,kBAAkB,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;QACrD,CAAC;KAAA;IAEK,SAAS,CAAC,EAAgD;YAAhD,EAAE,SAAS,EAAE,MAAM,OAA6B,EAA3B,0CAAO;;YAE1C,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;YAE/D,IAAI,CAAC,OAAO,EAAE;gBACZ,MAAM,IAAI,YAAY,CAAC,QAAQ,CAAC,iBAAiB,CAAC,CAAC;aACpD;YAED,MAAM,aAAa,GAAG,MAAM,IAAI,CAAC,kBAAkB,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAE7E,IAAI,aAAa,EAAE;gBACjB,MAAM,IAAI,YAAY,CAAC,QAAQ,CAAC,kBAAkB,CAAC,CAAC;aACrD;YAED,MAAM,OAAO,GAAG,IAAI,OAAO,mBACtB,IAAI,EACP,CAAC;YAEH,OAAO,IAAI,CAAC,kBAAkB,CAAC,SAAS,CAAC,OAAO,EAAE,OAAO,CAAC,SAAS,CAAC,CAAC;;KACtE;IAEK,SAAS,CAAC,EAAU,EAAE,IAAsB;;YAChD,OAAO,IAAI,CAAC,kBAAkB,CAAC,gBAAgB,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC;QAC5D,CAAC;KAAA;IAEK,UAAU,CAAC,EAAU;;YACzB,MAAM,IAAI,CAAC,kBAAkB,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC;QAC/C,CAAC;KAAA;CACF,CAAA;AA1DY,eAAe;IAD3B,UAAU,EAAE;IAIR,WAAA,gBAAgB,CAAC,kBAAkB,CAAC,CAAA;yDACA,kBAAkB,oBAAlB,kBAAkB,sDACrB,eAAe,oBAAf,eAAe;GALxC,eAAe,CA0D3B;SA1DY,eAAe","sourcesContent":["import { Messages, PaginatedResponse } from '@bit/alan18081.astra-storage.common.dist';\nimport { Storage} from './storage.entity';\nimport {StoragesRepository} from './storages.repository';\nimport { Injectable } from '@nestjs/common';\nimport { CreateStorageDto, FindStoragesListDto } from '@bit/alan18081.astra-storage.common.dist/dto';\nimport { RpcException } from '@nestjs/microservices';\nimport {InjectRepository} from '@nestjs/typeorm';\nimport {ProjectsService} from '../projects/projects.service';\n\n@Injectable()\nexport class StoragesService {\n\n  constructor(\n    @InjectRepository(StoragesRepository)\n    private readonly storagesRepository: StoragesRepository,\n    private readonly projectsService: ProjectsService,\n  ) {}\n\n  async findManyByProject({ projectId, userId, page, limit }: FindStoragesListDto): Promise<Storage[] | PaginatedResponse<Storage>> {\n    const project = await this.projectsService.findOneByUserId(projectId, userId);\n\n    if (!project) {\n      throw new RpcException(Messages.INVALID_PERMISSIONS);\n    }\n\n    if (page && limit) {\n      return this.storagesRepository.findManyWithPagination({ projectId }, { page, limit });\n    }\n\n    return this.storagesRepository.findManyByProjectId(projectId);\n  }\n\n  async findById(id: number): Promise<Storage | undefined> {\n    return this.storagesRepository.findById(id);\n  }\n\n  async findOneByPath(path: string): Promise<Storage | undefined> {\n    return this.storagesRepository.findOneByPath(path);\n  }\n\n  async createOne({ projectId, userId, ...data }: CreateStorageDto): Promise<Storage> {\n\n    const project = await this.projectsService.findById(projectId);\n\n    if (!project) {\n      throw new RpcException(Messages.PROJECT_NOT_FOUND);\n    }\n\n    const storageByPath = await this.storagesRepository.findOneByPath(data.path);\n\n    if (storageByPath) {\n      throw new RpcException(Messages.STORAGE_PATH_ERROR);\n    }\n\n    const storage = new Storage({\n      ...data,\n    });\n\n    return this.storagesRepository.createOne(storage, storage.projectId);\n  }\n\n  async updateOne(id: number, data: Partial<Storage>): Promise<Storage | undefined> {\n    return this.storagesRepository.updateOneAndFind(id, data);\n  }\n\n  async removeById(id: number): Promise<void> {\n    await this.storagesRepository.removeById(id);\n  }\n}\n"]},"_coverageSchema":"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c","hash":"794012664ca09d62c374c669e8c8e0a32d9e69fa"}
,"/home/alex/PhpstormProjects/astra-storage/ProjectsService/src/components/storages/tests/mocks.ts": {"path":"/home/alex/PhpstormProjects/astra-storage/ProjectsService/src/components/storages/tests/mocks.ts","statementMap":{"0":{"start":{"line":3,"column":27},"end":{"line":12,"column":1}},"1":{"start":{"line":13,"column":28},"end":{"line":13,"column":62}},"2":{"start":{"line":14,"column":38},"end":{"line":25,"column":1}},"3":{"start":{"line":26,"column":35},"end":{"line":29,"column":1}}},"fnMap":{},"branchMap":{},"s":{"0":3,"1":3,"2":3,"3":3},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"mocks.js","sourceRoot":"","sources":["mocks.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,OAAO,EAAE,MAAM,mBAAmB,CAAC;AAC5C,OAAO,EAAC,WAAW,EAAC,MAAM,eAAe,CAAC;AAE1C,MAAM,CAAC,MAAM,WAAW,GAAG;IACvB,EAAE,EAAE,EAAE;IACN,IAAI,EAAE,YAAY;IAClB,WAAW,EAAE,2BAA2B;IACxC,SAAS,EAAE,IAAI,IAAI,EAAE;IACrB,SAAS,EAAE,IAAI,IAAI,EAAE;IACrB,MAAM,EAAE,WAAW,CAAC,SAAS;IAC7B,IAAI,EAAE,MAAM;IACZ,SAAS,EAAE,CAAC;CACf,CAAC;AAEF,MAAM,CAAC,MAAM,YAAY,GAAG,CAAC,IAAI,OAAO,CAAC,EAAE,CAAC,EAAE,IAAI,OAAO,CAAC,EAAE,CAAC,CAAC,CAAC;AAE/D,MAAM,CAAC,MAAM,sBAAsB,GAAG;IAClC,QAAQ,KAAI,CAAC;IACb,IAAI,KAAI,CAAC;IACT,gBAAgB,KAAI,CAAC;IACrB,SAAS,KAAI,CAAC;IACd,UAAU,KAAI,CAAC;IACf,iBAAiB,KAAI,CAAC;IACtB,mBAAmB,KAAI,CAAC;IACxB,sBAAsB,KAAI,CAAC;IAC3B,aAAa,KAAI,CAAC;IAClB,SAAS,KAAI,CAAC;CACjB,CAAC;AAEF,MAAM,CAAC,MAAM,mBAAmB,GAAG;IAC/B,QAAQ,KAAI,CAAC;IACb,eAAe,KAAI,CAAC;CACvB,CAAC","sourcesContent":["import { Storage } from '../storage.entity';\nimport {StorageType} from '@bit/alan18081.astra-storage.common.dist';\n\nexport const mockStorage = {\n    id: 20,\n    name: 'My project',\n    description: 'Description of my project',\n    createdAt: new Date(),\n    updatedAt: new Date(),\n    typeId: StorageType.PROTECTED,\n    path: 'alan',\n    projectId: 6,\n};\n\nexport const mockStorages = [new Storage({}), new Storage({})];\n\nexport const mockStoragesRepository = {\n    findById() {},\n    save() {},\n    updateOneAndFind() {},\n    updateOne() {},\n    removeById() {},\n    findManyByProject() {},\n    findManyByProjectId() {},\n    findManyWithPagination() {},\n    findOneByPath() {},\n    createOne() {},\n};\n\nexport const mockProjectsService = {\n    findById() {},\n    findOneByUserId() {},\n};\n"]},"_coverageSchema":"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c","hash":"cd0c6d17ceb8f1c221e543fe25f17a0d7a94e449"}
}
